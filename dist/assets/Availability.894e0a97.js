import{_ as de,i as ue,h as c,A as ce,s as ve,z as me,r as _,o as i,c as d,d as a,w as s,b as t,e as b,k as pe,B as fe,F as U,C as E,y as z,j as y,t as u,l as f,m as _e}from"./index.5a43fe89.js";import{C as g}from"./component.aa24574e.js";const be={class:"d-flex justify-content-end"},ye={class:"d-flex justify-content-between"},ge={class:"d-flex align-items-center"},ke=["value"],Pe={class:"d-flex align-items-center"},Ae={class:"table-responsive"},Ve={class:"table table-hover"},we=["onClick"],xe=["onClick"],Ce={key:1},Te={"aria-label":"Page navigation"},$e={class:"pagination justify-content-end"},De=["disabled"],Se=["onClick"],Ue=["disabled"],Fe={class:"mb-3"},Be={key:0,class:"error","aria-live":"polite"},Ne={class:"mb-3"},je={key:0,class:"error","aria-live":"polite"},Ie={class:"mb-3"},Oe={key:0,class:"error","aria-live":"polite"},Ee={class:"mb-3"},ze={key:0,class:"error","aria-live":"polite"},Me={key:0,class:"error","aria-live":"polite"},he={class:"d-flex justify-content-end"},Le={class:"mb-3"},Ye={key:0,class:"error","aria-live":"polite"},He={class:"mb-3"},Ke={key:0,class:"error","aria-live":"polite"},Qe={class:"mb-3"},qe={key:0,class:"error","aria-live":"polite"},Ge={class:"mb-3"},Je={key:0,class:"error","aria-live":"polite"},Re={key:0,class:"error","aria-live":"polite"},We={class:"d-flex justify-content-end"},Xe={__name:"Availability",setup(Ze){const K=ue(),F=c(null),B=c(null),M=c("");M.value=K.getUserId();const r=c({user_id:M.value,start_date:"",end_date:"",start_time:"",end_time:"",description:""}),T={enableTime:!1,dateFormat:"Y-m-d"},$={enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},Q=()=>{F.value&&F.value.show()},q=o=>{B.value&&(te(o),B.value.show())},{proxy:m}=_e(),P=ce(),V=c([]),A=c(""),D=c("asc"),h=c(!1),p=c(1),w=c(1),G=c(20),N=c(20),J=c([10,20,50,100]),j=c(""),R=c(""),n=c({}),I=o=>{o>0&&o<=w.value&&(p.value=o,getAppointments(o))},W=async()=>{p.value=1,await getAppointments(1)},x=o=>{A.value===o?D.value=D.value==="asc"?"desc":"asc":(A.value=o,D.value="asc")},X=async()=>{try{const o=await P.get(`v1/scheduler/availabilities?search=${j.value}`);h.value=Array.isArray(o.data),V.value=o.data.dataPayload.data}catch{m.$showToast({title:"An error occurred ",text:"Ooops! an error occured",icon:"error"})}};ve(async()=>{S(1)});const Z=o=>{R.value=o,m.$showAlert({title:"Are you sure?",text:"You are about to cancel this entry. Do you want to proceed?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, cancel it!",cancelButtonText:"No, keep it",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6"}).then(e=>{e.isConfirmed&&(ee(o),S(1))})},ee=async o=>{try{const e=await P.delete(`v1/scheduler/availability/${o}`);m.$showToast({title:"Appointment cancelled",icon:"success"}),S(1)}catch{m.$showToast({title:"An error occurred ",text:"Ooops! an error occured",icon:"error"})}},S=async(o=1)=>{try{const e=await P.get(`v1/scheduler/availabilities?page=${o}&perPage=${N.value}`);h.value=Array.isArray(e.data),V.value=e.data.dataPayload.data,p.value=e.data.dataPayload.currentPage,w.value=e.data.dataPayload.totalPages,G.value=e.data.dataPayload.perPage}catch{m.$showToast({title:"An error occurred ",text:"Ooops! an error occured",icon:"error"})}},te=async o=>{try{const e=await P.get(`v1/scheduler/availability/${o}`);r.value=e.data.dataPayload.data}catch{m.$showToast({title:"An error occurred ",text:"Ooops! an error occured",icon:"error"})}},le=me(()=>[...V.value].sort((o,e)=>{let k=D.value==="asc"?1:-1;return o[A.value]<e[A.value]?-1*k:o[A.value]>e[A.value]?1*k:0})),ae=async()=>{try{const o=await P.post("v1/scheduler/availability",r.value);m.$showToast({title:"Updated",text:"settings updated successfully!",icon:"success"}),S(1)}catch(o){o.response.data.errorPayload?n.value=o.response.data.errorPayload.errors:m.$showToast({title:"Failed",text:"an error occurred",icon:"error"})}},oe=async()=>{try{const o=await P.put(`v1/scheduler/availability/${id}`,r.value);m.$showToast({title:"success",text:"updated successfully",icon:"success"})}catch(o){o.response.data.errorPayload?n.value=o.response.data.errorPayload.errors:m.$showToast({title:"Failed",text:"failed to update your settings",icon:"error"})}};return(o,e)=>{const k=_("b-button"),v=_("b-col"),O=_("b-form-input"),se=_("b-input-group-append"),re=_("b-input-group"),C=_("b-row"),ne=_("b-card"),L=_("b-form-group"),Y=_("b-modal");return i(),d(U,null,[a(v,{lg:"12"},{default:s(()=>[a(ne,null,{default:s(()=>[e[31]||(e[31]=t("div",null,[t("h2",null,"Availability")],-1)),a(C,{class:"mb-3"},{default:s(()=>[a(v,{lg:"12",class:"mb-3"},{default:s(()=>[t("div",be,[a(k,{variant:"primary",onClick:Q},{default:s(()=>e[19]||(e[19]=[b(" New Availability ")])),_:1})])]),_:1}),a(v,{lg:"12"},{default:s(()=>[t("div",ye,[t("div",ge,[e[20]||(e[20]=t("label",{for:"itemsPerPage",class:"me-2"},"Items per page:",-1)),pe(t("select",{id:"itemsPerPage","onUpdate:modelValue":e[0]||(e[0]=l=>N.value=l),onChange:W,class:"form-select form-select-sm"},[(i(!0),d(U,null,E(J.value,l=>(i(),d("option",{key:l,value:l},u(l),9,ke))),128))],544),[[fe,N.value]])]),t("div",Pe,[a(re,null,{default:s(()=>[a(O,{placeholder:"Search...",modelValue:j.value,"onUpdate:modelValue":e[1]||(e[1]=l=>j.value=l)},null,8,["modelValue"]),a(se,null,{default:s(()=>[a(k,{variant:"primary",onClick:X},{default:s(()=>e[21]||(e[21]=[b("Search")])),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1}),t("div",Ae,[t("table",Ve,[t("thead",null,[t("tr",null,[t("th",{onClick:e[2]||(e[2]=l=>x("description"))},e[22]||(e[22]=[b("Description "),t("i",{class:"fas fa-sort"},null,-1)])),t("th",{onClick:e[3]||(e[3]=l=>x("start_date"))},e[23]||(e[23]=[b("Start Date "),t("i",{class:"fas fa-sort"},null,-1)])),t("th",{onClick:e[4]||(e[4]=l=>x("end_date"))},e[24]||(e[24]=[b("End Date "),t("i",{class:"fas fa-sort"},null,-1)])),t("th",{onClick:e[5]||(e[5]=l=>x("start_time"))},e[25]||(e[25]=[b("Start Time "),t("i",{class:"fas fa-sort"},null,-1)])),t("th",{onClick:e[6]||(e[6]=l=>x("end_time"))},e[26]||(e[26]=[b("End Time "),t("i",{class:"fas fa-sort"},null,-1)])),e[27]||(e[27]=t("th",null,"Actions",-1))])]),t("tbody",null,[Array.isArray(V.value)&&V.value.length>0?(i(!0),d(U,{key:0},E(le.value,(l,H)=>(i(),d("tr",{key:H},[t("td",null,u(l.description),1),t("td",null,u(l.start_date),1),t("td",null,u(l.end_date),1),t("td",null,u(l.start_time),1),t("td",null,u(l.end_time),1),t("td",null,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm me-3",onClick:ie=>q(l.id)},e[28]||(e[28]=[t("i",{class:"fas fa-edit"},null,-1)]),8,we),t("button",{type:"button",class:"btn btn-outline-warning btn-sm",onClick:ie=>Z(l.id)},e[29]||(e[29]=[t("i",{class:"fas fa-cancel"},null,-1)]),8,xe)])]))),128)):(i(),d("tr",Ce,e[30]||(e[30]=[t("td",{colspan:"6",class:"text-center"},"No records found.",-1)])))])])]),a(v,{sm:"12",lg:"12",class:"mt-5 d-flex justify-content-end mb-n5"},{default:s(()=>[t("nav",Te,[t("ul",$e,[t("li",{class:z(["page-item",{disabled:p.value===1}])},[t("button",{class:"page-link",onClick:e[7]||(e[7]=l=>I(p.value-1)),disabled:p.value===1},"Previous",8,De)],2),(i(!0),d(U,null,E(w.value,l=>(i(),d("li",{key:l,class:z(["page-item",{active:p.value===l}])},[t("button",{class:"page-link",onClick:H=>I(l)},u(l),9,Se)],2))),128)),t("li",{class:z(["page-item",{disabled:p.value===w.value}])},[t("button",{class:"page-link",onClick:e[8]||(e[8]=l=>I(p.value+1)),disabled:p.value===w.value},"Next",8,Ue)],2)])])]),_:1})]),_:1})]),_:1}),a(Y,{ref_key:"newAvailability",ref:F,title:"New Availability",class:"modal-fullscreen my-modal","no-close-on-backdrop":"","no-close-on-esc":"",size:"xl","hide-footer":""},{default:s(()=>[e[37]||(e[37]=t("h4",null,"Availability Settings",-1)),a(C,null,{default:s(()=>[a(v,{md:"12"},{default:s(()=>[t("div",Fe,[e[32]||(e[32]=t("label",{for:"startDatePicker",class:"form-label"},"Start Date",-1)),a(y(g),{modelValue:r.value.start_date,"onUpdate:modelValue":e[9]||(e[9]=l=>r.value.start_date=l),class:"form-control",config:T,id:"startDatePicker"},null,8,["modelValue"])]),n.value.start_date?(i(),d("div",Be,u(n.value.start_date),1)):f("",!0)]),_:1}),a(v,{md:"12"},{default:s(()=>[t("div",Ne,[e[33]||(e[33]=t("label",{for:"endDatePicker",class:"form-label"},"Last Date",-1)),a(y(g),{modelValue:r.value.end_date,"onUpdate:modelValue":e[10]||(e[10]=l=>r.value.end_date=l),class:"form-control",config:T,id:"endDatePicker"},null,8,["modelValue"])]),n.value.end_date?(i(),d("div",je,u(n.value.end_date),1)):f("",!0)]),_:1})]),_:1}),a(C,null,{default:s(()=>[a(v,{md:"6"},{default:s(()=>[t("div",Ie,[e[34]||(e[34]=t("label",{for:"startTimePicker",class:"form-label"},"Start Time",-1)),a(y(g),{modelValue:r.value.start_time,"onUpdate:modelValue":e[11]||(e[11]=l=>r.value.start_time=l),class:"form-control",config:$,id:"startTimePicker"},null,8,["modelValue"])]),n.value.start_time?(i(),d("div",Oe,u(n.value.start_time),1)):f("",!0)]),_:1}),a(v,{md:"5"},{default:s(()=>[t("div",Ee,[e[35]||(e[35]=t("label",{for:"endTimePicker",class:"form-label"},"End Time",-1)),a(y(g),{modelValue:r.value.end_time,"onUpdate:modelValue":e[12]||(e[12]=l=>r.value.end_time=l),class:"form-control",config:$,id:"endTimePicker"},null,8,["modelValue"])]),n.value.end_time?(i(),d("div",ze,u(n.value.end_time),1)):f("",!0)]),_:1}),a(v,{md:"12",class:"mb-3"},{default:s(()=>[a(L,{label:"Description","label-for":"descriptionField"},{default:s(()=>[a(O,{id:"descriptionField",type:"text",modelValue:r.value.description,"onUpdate:modelValue":e[13]||(e[13]=l=>r.value.description=l)},null,8,["modelValue"]),n.value.description?(i(),d("div",Me,u(n.value.description),1)):f("",!0)]),_:1})]),_:1})]),_:1}),t("div",he,[a(k,{onClick:ae,variant:"primary"},{default:s(()=>e[36]||(e[36]=[b("Save")])),_:1})])]),_:1},512),a(Y,{ref_key:"updateAvailability",ref:B,title:"update Availability",class:"modal-fullscreen my-modal","no-close-on-backdrop":"","no-close-on-esc":"",size:"xl","hide-footer":""},{default:s(()=>[e[43]||(e[43]=t("h4",null,"Availability Settings",-1)),a(C,null,{default:s(()=>[a(v,{md:"12"},{default:s(()=>[t("div",Le,[e[38]||(e[38]=t("label",{for:"startDatePicker",class:"form-label"},"Start Date",-1)),a(y(g),{modelValue:r.value.start_date,"onUpdate:modelValue":e[14]||(e[14]=l=>r.value.start_date=l),class:"form-control",config:T,id:"startDatePicker"},null,8,["modelValue"])]),n.value.start_date?(i(),d("div",Ye,u(n.value.start_date),1)):f("",!0)]),_:1}),a(v,{md:"12"},{default:s(()=>[t("div",He,[e[39]||(e[39]=t("label",{for:"endDatePicker",class:"form-label"},"Last Date",-1)),a(y(g),{modelValue:r.value.end_date,"onUpdate:modelValue":e[15]||(e[15]=l=>r.value.end_date=l),class:"form-control",config:T,id:"endDatePicker"},null,8,["modelValue"])]),n.value.end_date?(i(),d("div",Ke,u(n.value.end_date),1)):f("",!0)]),_:1})]),_:1}),a(C,null,{default:s(()=>[a(v,{md:"6"},{default:s(()=>[t("div",Qe,[e[40]||(e[40]=t("label",{for:"startTimePicker",class:"form-label"},"Start Time",-1)),a(y(g),{modelValue:r.value.start_time,"onUpdate:modelValue":e[16]||(e[16]=l=>r.value.start_time=l),class:"form-control",config:$,id:"startTimePicker"},null,8,["modelValue"])]),n.value.start_time?(i(),d("div",qe,u(n.value.start_time),1)):f("",!0)]),_:1}),a(v,{md:"5"},{default:s(()=>[t("div",Ge,[e[41]||(e[41]=t("label",{for:"endTimePicker",class:"form-label"},"End Time",-1)),a(y(g),{modelValue:r.value.end_time,"onUpdate:modelValue":e[17]||(e[17]=l=>r.value.end_time=l),class:"form-control",config:$,id:"endTimePicker"},null,8,["modelValue"])]),n.value.end_time?(i(),d("div",Je,u(n.value.end_time),1)):f("",!0)]),_:1}),a(v,{md:"12",class:"mb-3"},{default:s(()=>[a(L,{label:"Description","label-for":"descriptionField"},{default:s(()=>[a(O,{id:"descriptionField",type:"text",modelValue:r.value.description,"onUpdate:modelValue":e[18]||(e[18]=l=>r.value.description=l)},null,8,["modelValue"]),n.value.description?(i(),d("div",Re,u(n.value.description),1)):f("",!0)]),_:1})]),_:1})]),_:1}),t("div",We,[a(k,{onClick:oe,variant:"primary"},{default:s(()=>e[42]||(e[42]=[b("Update")])),_:1})])]),_:1},512)],64)}}};var lt=de(Xe,[["__scopeId","data-v-79fca44c"]]);export{lt as default};

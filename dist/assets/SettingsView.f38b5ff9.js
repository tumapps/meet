import{A,j as f,q as B,r as _,o as d,g as E,w as n,d as l,b as o,c as m,t as u,n as p,p as I}from"./index.848ef5b1.js";import"./pdfjs.7adb8c57.js";const M={class:"mb-3"},N={key:0,class:"error","aria-live":"polite"},$={class:"mb-3"},D={key:0,class:"error","aria-live":"polite"},F={class:"mb-3"},T={key:0,class:"error","aria-live":"polite"},j={class:"mb-3"},q={key:0,class:"error","aria-live":"polite"},z={class:"mb-3"},G={key:0,class:"error","aria-live":"polite"},H={class:"mb-3"},J={key:0,class:"error","aria-live":"polite"},K={class:"mb-3"},L={key:0,class:"error","aria-live":"polite"},O={class:"mb-3"},Q={key:0,class:"error","aria-live":"polite"},R={class:"mb-3"},W={key:0,class:"error","aria-live":"polite"},X={class:"mb-3"},Y={key:0,class:"error","aria-live":"polite"},Z={class:"text-center mt-5"},ee={key:1},se={__name:"SettingsView",setup(ae){const g=A(),{proxy:V}=I(),a=f({app_name:"",system_email:"",category:"",email_scheme:"",email_smtps:"",email_port:"",email_encryption:"",email_password:"",email_username:"",description:""}),t=f({}),c=f(!1),b=f(null),w=async()=>{var y,e,v;c.value=!0;try{const i=await g.get("/v1/scheduler/system-settings");(v=(e=(y=i.data)==null?void 0:y.dataPayload)==null?void 0:e.data)!=null&&v.length?a.value=i.data.dataPayload.data[0]:(console.warn("Unexpected API response structure:",i.data),b.value={type:"error",text:"Unexpected API response structure. Please contact support."})}catch(i){console.error("Failed to fetch settings:",i),b.value={type:"error",text:"Failed to fetch settings. Please try again."}}finally{c.value=!1}},x=async y=>{var e,v,i;c.value=!0,t.value={},b.value=null;try{const s=await g.put(`/v1/scheduler/system-settings/${y}`,a.value);(v=(e=s.data)==null?void 0:e.dataPayload)!=null&&v.data&&(a.value={...a.value,...s.data.dataPayload.data},V.$showAlert({title:s.data.toastPayload.toastMessage,icon:s.data.toastPayload.toastTheme,text:s.data.toastPayload.toastMessage,showCancelButton:!1,showConfirmButton:!1,timer:4e3}))}catch(s){s.response&&s.response.status===422?t.value=s.response.data.errorPayload.errors:(console.error("Failed to update settings:",s),V.$showAlert({title:"error",icon:"error",text:(i=s.response.data.errorPayload.errors)==null?void 0:i.message,showCancelButton:!1,showConfirmButton:!1,timer:4e3}))}finally{c.value=!1}};return B(w),(y,e)=>{const v=_("b-card-header"),i=_("b-form-input"),s=_("b-col"),P=_("b-form-textarea"),h=_("b-row"),k=_("b-spinner"),U=_("b-button"),S=_("b-card-body"),C=_("b-card");return d(),E(C,null,{default:n(()=>[l(v,null,{default:n(()=>e[11]||(e[11]=[o("h4",{class:"card-title"},"App Settings",-1)])),_:1}),l(S,null,{default:n(()=>[l(h,null,{default:n(()=>[l(s,{md:"12",lg:"6"},{default:n(()=>[o("div",M,[e[12]||(e[12]=o("label",{for:"app_name",class:"form-label"},"App Name",-1)),l(i,{id:"app_name",modelValue:a.value.app_name,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.app_name=r),type:"text",placeholder:"Enter App Name"},null,8,["modelValue"])]),t.value.app_name?(d(),m("div",N,u(t.value.app_name),1)):p("",!0)]),_:1}),l(s,{md:"12",lg:"6"},{default:n(()=>[o("div",$,[e[13]||(e[13]=o("label",{for:"system_email",class:"form-label"},"System Email",-1)),l(i,{id:"system_email",modelValue:a.value.system_email,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.system_email=r),type:"text",placeholder:"Enter System Email"},null,8,["modelValue"])]),t.value.system_email?(d(),m("div",D,u(t.value.system_email),1)):p("",!0)]),_:1}),l(s,{md:"12",lg:"6"},{default:n(()=>[o("div",F,[e[14]||(e[14]=o("label",{for:"category",class:"form-label"},"Category",-1)),l(i,{id:"category",modelValue:a.value.category,"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.category=r),type:"text",placeholder:"Enter Category"},null,8,["modelValue"])]),t.value.category?(d(),m("div",T,u(t.value.category),1)):p("",!0)]),_:1}),l(s,{md:"12",lg:"6"},{default:n(()=>[o("div",j,[e[15]||(e[15]=o("label",{for:"email_scheme",class:"form-label"},"Email Scheme",-1)),l(i,{id:"email_scheme",modelValue:a.value.email_scheme,"onUpdate:modelValue":e[3]||(e[3]=r=>a.value.email_scheme=r),type:"text",placeholder:"Enter Email Scheme"},null,8,["modelValue"])]),t.value.email_scheme?(d(),m("div",q,u(t.value.email_scheme),1)):p("",!0)]),_:1}),l(s,{md:"12",lg:"6"},{default:n(()=>[o("div",z,[e[16]||(e[16]=o("label",{for:"email_smtps",class:"form-label"},"Email SMTPs",-1)),l(i,{id:"email_smtps",modelValue:a.value.email_smtps,"onUpdate:modelValue":e[4]||(e[4]=r=>a.value.email_smtps=r),type:"text",placeholder:"Enter Email SMTPs"},null,8,["modelValue"])]),t.value.email_smtps?(d(),m("div",G,u(t.value.email_smtps),1)):p("",!0)]),_:1}),l(s,{md:"12",lg:"6"},{default:n(()=>[o("div",H,[e[17]||(e[17]=o("label",{for:"email_port",class:"form-label"},"Email Port",-1)),l(i,{id:"email_port",modelValue:a.value.email_port,"onUpdate:modelValue":e[5]||(e[5]=r=>a.value.email_port=r),type:"text",placeholder:"Enter Email Port"},null,8,["modelValue"])]),t.value.email_port?(d(),m("div",J,u(t.value.email_port),1)):p("",!0)]),_:1}),l(s,{md:"12",lg:"6"},{default:n(()=>[o("div",K,[e[18]||(e[18]=o("label",{for:"email_encryption",class:"form-label"},"Email Encryption",-1)),l(i,{id:"email_encryption",modelValue:a.value.email_encryption,"onUpdate:modelValue":e[6]||(e[6]=r=>a.value.email_encryption=r),type:"text",placeholder:"Enter Email Encryption"},null,8,["modelValue"])]),t.value.email_encryption?(d(),m("div",L,u(t.value.email_encryption),1)):p("",!0)]),_:1}),l(s,{md:"12",lg:"6"},{default:n(()=>[o("div",O,[e[19]||(e[19]=o("label",{for:"email_password",class:"form-label"},"Email Password",-1)),l(i,{id:"email_password",modelValue:a.value.email_password,"onUpdate:modelValue":e[7]||(e[7]=r=>a.value.email_password=r),type:"password",placeholder:"Enter Email Password"},null,8,["modelValue"])]),t.value.email_password?(d(),m("div",Q,u(t.value.email_password),1)):p("",!0)]),_:1}),l(s,{md:"12",lg:"6"},{default:n(()=>[o("div",R,[e[20]||(e[20]=o("label",{for:"email_username",class:"form-label"},"Email Username",-1)),l(i,{id:"email_username",modelValue:a.value.email_username,"onUpdate:modelValue":e[8]||(e[8]=r=>a.value.email_username=r),type:"text",placeholder:"Enter Email Username"},null,8,["modelValue"])]),t.value.email_username?(d(),m("div",W,u(t.value.email_username),1)):p("",!0)]),_:1}),l(s,{md:"12"},{default:n(()=>[o("div",X,[e[21]||(e[21]=o("label",{for:"description",class:"form-label"},"Description",-1)),l(P,{id:"description",modelValue:a.value.description,"onUpdate:modelValue":e[9]||(e[9]=r=>a.value.description=r),placeholder:"Enter Description",rows:"5"},null,8,["modelValue"])]),t.value.description?(d(),m("div",Y,u(t.value.description),1)):p("",!0)]),_:1})]),_:1}),o("div",Z,[l(U,{onClick:e[10]||(e[10]=r=>x(a.value.id)),disabled:c.value,variant:"primary"},{default:n(()=>[c.value?(d(),E(k,{key:0,small:""})):(d(),m("span",ee,"Save"))]),_:1},8,["disabled"])])]),_:1})]),_:1})}}};export{se as default};

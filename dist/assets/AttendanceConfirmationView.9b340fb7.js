import{_ as A,A as k,j as v,Q as B,z as P,q as I,c as h,b as t,e as l,t as r,G as $,n as R,R as T,o as x,p as V}from"./index.8cdfa475.js";import"./pdfjs.7adb8c57.js";var M="/logo.ico";const D={class:"confirm-section"},q={class:"d-flex justify-content-center align-items-center vh-100"},E={class:"card shadow-lg p-5 rounded"},j={class:"text-center mb-4"},z={style:{color:"#666"}},L={class:"card-header bg-light rounded mb-3"},N={class:"card-title mb-3",style:{"text-decoration":"underline","text-transform":"uppercase"}},Y={class:"card-body"},F={class:"list-unstyled"},S=["href"],G={class:"mt-4 text-center"},Q=["disabled"],U=["disabled"],H={key:0,class:"mt-4 text-center"},J={__name:"AttendanceConfirmationView",setup(K){const c=T(),g=k(),{proxy:u}=V(),o=v({}),m=v(!1),i=v(""),b=async n=>{try{const e=await g.get(`/v1/scheduler/meeting-info/${n}`);o.value=e.data.dataPayload.data}catch(e){console.error("Error fetching meeting details:",e),i.value="Failed to load meeting details."}},w=c.params.meetingId,C=c.params.attendeeId,f=v({feedback:"",decline_reason:""}),y=async()=>{var n,e,a,d;m.value=!0;try{const s=await g.post(`/v1/scheduler/confirm-attendance/${w}/${C}`,f.value);u.$showAlert({title:s.data.toastPayload.toastTheme,text:s.data.toastPayload.toastMessage,icon:s.data.toastPayload.toastTheme,showCancelButton:!1,showConfirmButton:!1})}catch(s){const p=((n=s.response.data.errorPayload.errors)==null?void 0:n.message)||"An unknown error occurred";p&&u.$showAlert({title:((e=s.response.data.errorPayload)==null?void 0:e.toastTheme)||"Error",text:((a=s.response.data.errorPayload)==null?void 0:a.toastMessage)||p,icon:((d=s.response.data.errorPayload)==null?void 0:d.toastTheme)||"error",showCancelButton:!1,showConfirmButton:!1})}finally{m.value=!1}},_=n=>{u.$showAlert({title:"Are you sure?",text:`You are about to ${n} your invitation to this meeting. This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Confirm",cancelButtonText:"Cancel",confirmButtonColor:"#076232",cancelButtonColor:"#d33"}).then(e=>{e.isConfirmed&&(n==="Accept"?(f.value.feedback=1,y()):u.$showAlert({title:"Reason for Declining",text:"Please provide a reason for declining this invitation.",input:"text",inputPlaceholder:"Enter your reason here...",inputValidator:a=>a?null:"Reason is required!"}).then(a=>{a.value&&(f.value.feedback=0,f.value.decline_reason=a.value,y())}))})};return B(()=>{o.value={}}),P(()=>c.params.meetingId,n=>{n&&b(n)}),I(()=>{const n=c.params.meetingId;n?b(n):i.value="Meeting not found"}),(n,e)=>{var a,d,s;return x(),h("section",D,[t("div",q,[t("div",E,[t("div",j,[e[5]||(e[5]=t("img",{src:M,alt:"Company Logo",class:"mb-3",style:{"max-width":"180px"}},null,-1)),e[6]||(e[6]=t("h2",{style:{"font-family":"'Arial', sans-serif","font-weight":"bold",color:"#003366"}},"Attendance Confirmation Request",-1)),t("p",z,[e[2]||(e[2]=l(" You have been requested to be present at the following appointment, organized by ")),t("strong",null,r(o.value.contact_name),1),e[3]||(e[3]=l(", alongside ")),t("strong",null,r(o.value.bookedFor),1),e[4]||(e[4]=l(". "))])]),t("div",L,[t("h4",N,"RE: "+r(o.value.subject),1)]),t("div",Y,[t("ul",F,[t("li",null,[e[7]||(e[7]=t("strong",null,"Date:",-1)),l(" "+r(o.value.appointment_date),1)]),t("li",null,[e[8]||(e[8]=t("strong",null,"Time:",-1)),l(" "+r(o.value.start_time)+" to "+r(o.value.end_time),1)]),t("li",null,[e[9]||(e[9]=t("strong",null,"Location:",-1)),l(" "+r((d=(a=o.value)==null?void 0:a.space)==null?void 0:d.name),1)]),t("li",null,[e[10]||(e[10]=t("strong",null,"Agenda:",-1)),t("a",{class:"m-3",href:((s=o.value.attachment)==null?void 0:s.downloadLink)||"#",target:"_blank",rel:"noopener noreferrer"},r(o.value.description||"View Agenda"),9,S)])])]),t("div",G,[e[13]||(e[13]=t("p",{class:"mb-4 text-secondary"},"Your confirmation of attendance is required to finalize this appointment. Please respond below.",-1)),t("button",{class:"btn btn-success mx-3 mb-3",disabled:m.value,onClick:e[0]||(e[0]=p=>_("Accept"))},e[11]||(e[11]=[t("i",{class:"fas fa-check-circle"},null,-1),l(" Confirm Attendance")]),8,Q),t("button",{class:"btn btn-danger mx-3",disabled:m.value,onClick:e[1]||(e[1]=p=>_("Reject"))},e[12]||(e[12]=[t("i",{class:"fas fa-times-circle"},null,-1),l(" Decline Attendance")]),8,U)]),i.value?(x(),h("div",H,[t("p",{class:$({"text-success":i.value.includes("confirmed"),"text-danger":i.value.includes("declined")})},r(i.value),3)])):R("",!0)])])])}}};var X=A(J,[["__scopeId","data-v-bf3de794"]]);export{X as default};

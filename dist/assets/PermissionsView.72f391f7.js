import{A as z,j as r,z as F,y as I,q as M,r as d,o as u,g as U,w as n,d as o,b as t,m as E,D as G,c,C as P,F as k,e as V,G as x,t as g}from"./index.16224396.js";import"./pdfjs.7adb8c57.js";const K={class:"d-flex justify-content-between"},L={class:"d-flex align-items-center"},Q=["value"],H={class:"d-flex align-items-center"},J={class:"table-responsive"},R={class:"table table-hover"},W={key:1},X={"aria-label":"Page navigation"},Y={class:"pagination justify-content-end"},Z=["disabled"],ee=["onClick"],te=["disabled"],ne={__name:"PermissionsView",setup(ae){const $=z(),h=r("asc"),m=r(""),b=r(""),l=r(1),v=r(1),f=r(20),D=r(20),N=r([20,50]),_=r([]),y=s=>{s>0&&s<=v.value&&(l.value=s,p(s))},p=async(s=l.value)=>{try{const e=await $.get(`/v1/iam/rbac/permission?page=${s}&per-page=${f.value}&_q=${b.value}`);_.value=Object.values(e.data.dataPayload.data),console.log(_.value),l.value=e.data.dataPayload.currentPage,v.value=e.data.dataPayload.totalPages,D.value=e.data.dataPayload.perPage}catch(e){console.error(e)}};F(b,()=>{p(1)});const j=I(()=>[..._.value].sort((s,e)=>{let i=h.value==="asc"?1:-1;return s[m.value]<e[m.value]?-1*i:s[m.value]>e[m.value]?1*i:0})),A=async()=>{await p(1)};return M(()=>{p()}),(s,e)=>{const i=d("b-col"),w=d("b-row"),B=d("b-form-input"),S=d("b-button"),O=d("b-input-group-append"),T=d("b-input-group"),q=d("b-card");return u(),U(i,{lg:"12"},{default:n(()=>[o(q,null,{default:n(()=>[o(w,{class:"mb-5"},{default:n(()=>[o(i,{lg:"6"},{default:n(()=>e[6]||(e[6]=[t("div",null,[t("h2",null,"Permissions")],-1)])),_:1})]),_:1}),o(w,{class:"mb-3"},{default:n(()=>[o(i,{lg:"12"},{default:n(()=>[t("div",K,[t("div",L,[E(t("select",{id:"itemsPerPage","onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),onChange:A,class:"form-select form-select-sm"},[(u(!0),c(k,null,P(N.value,a=>(u(),c("option",{key:a,value:a},g(a),9,Q))),128))],544),[[G,f.value]])]),t("div",H,[o(T,null,{default:n(()=>[o(B,{placeholder:"Search...",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=a=>b.value=a)},null,8,["modelValue"]),o(O,null,{default:n(()=>[o(S,{variant:"primary",onClick:e[2]||(e[2]=a=>p(1))},{default:n(()=>e[7]||(e[7]=[V("Search")])),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1}),t("div",J,[t("table",R,[t("thead",null,[t("tr",null,[t("th",{onClick:e[3]||(e[3]=a=>s.sortTable("start_date"))},e[8]||(e[8]=[V("Name "),t("i",{class:"fas fa-sort"},null,-1)])),e[9]||(e[9]=t("th",null,"Description",-1))])]),t("tbody",null,[Array.isArray(_.value)&&_.value.length>0?(u(!0),c(k,{key:0},P(j.value,(a,C)=>(u(),c("tr",{key:C},[t("td",null,g(a.name),1),t("td",null,g(a.description),1)]))),128)):(u(),c("tr",W,e[10]||(e[10]=[t("td",{colspan:"6",class:"text-center"},"No records found.",-1)])))])])]),o(i,{sm:"12",lg:"12",class:"mt-5 d-flex justify-content-end mb-n5"},{default:n(()=>[t("nav",X,[t("ul",Y,[t("li",{class:x(["page-item",{disabled:l.value===1}])},[t("button",{class:"page-link",onClick:e[4]||(e[4]=a=>y(l.value-1)),disabled:l.value===1},"Previous",8,Z)],2),(u(!0),c(k,null,P(v.value,a=>(u(),c("li",{key:a,class:x(["page-item",{active:l.value===a}])},[t("button",{class:"page-link",onClick:C=>y(a)},g(a),9,ee)],2))),128)),t("li",{class:x(["page-item",{disabled:l.value===v.value}])},[t("button",{class:"page-link",onClick:e[5]||(e[5]=a=>y(l.value+1)),disabled:l.value===v.value},"Next",8,te)],2)])])]),_:1})]),_:1})]),_:1})}}};export{ne as default};

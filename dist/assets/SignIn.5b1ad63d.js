import{A as C,P as M,h as l,i as T,u as I,r as v,o,c as r,b as s,d as b,w as f,Q as V,C as E,k as w,v as y,t as h,l as d,e as U,R as A,m as N}from"./index.ffa9f8cb.js";const j=C(),B=m=>j.post("/v1/auth/login",m);const D={class:"iq-auth-page"},R={class:"row m-0 align-items-center justify-content-center vh-100 w-100"},q={class:"col-md-4 col-lg-3"},$=["src"],F={class:"form-group"},J={key:0,class:"error","aria-live":"polite"},L={class:"form-group"},Q={key:0,class:"error","aria-live":"polite"},Y={class:"d-flex justify-content-between align-items-center mb-3"},z={class:"text-center pb-3"},G=["disabled"],H={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},O={__name:"SignIn",setup(m){const g=M(),t=l(!1),i=l(""),u=l(""),a=l({username:"",password:"",general:""}),x=T(),k=I(),{proxy:p}=N(),S=async()=>{a.value={username:"",password:"",general:""};const _={username:i.value,password:u.value};try{t.value=!0;const e=await B(_);e.data.dataPayload&&!e.data.dataPayload.error&&e.data.dataPayload.data.menus&&(x.setToken(e.data.dataPayload.data.token,e.data.dataPayload.data.username),g.setMenus(e.data.dataPayload.data.menus),p.$showToast({title:"success",text:"You have successfully logged in!",icon:"success"}),k.push("/"))}catch(e){if(e.response&&e.response.status===422&&e.response.data.errorPayload){const n=e.response.data.errorPayload.errors;a.value.username=n.username||"",a.value.password=n.password||""}else p.$showToast({title:"error",text:"An unexpected error occurred!",icon:"error"})}finally{t.value=!1}};return(_,e)=>{const n=v("router-link"),P=v("b-card");return o(),r("section",D,[s("div",R,[s("div",q,[b(P,{class:"h-100 py-5 d-flex flex-column justify-content-between",style:{background:"white !important"}},{default:f(()=>[s("img",{src:V||A,class:"h-12 w-25 d-block mx-auto",alt:"logo"},null,8,$),e[6]||(e[6]=s("h5",{class:"text-center mt-3 mb-4 fw-bold text-primary"},"Sign In | TUMMEET",-1)),s("form",{onSubmit:E(S,["prevent"])},[s("div",F,[e[2]||(e[2]=s("label",{class:"form-label",for:"username-id"},"Username",-1)),w(s("input",{type:"text",class:"form-control mb-0",id:"username","onUpdate:modelValue":e[0]||(e[0]=c=>i.value=c),placeholder:"Enter username","aria-label":"Username"},null,512),[[y,i.value]]),a.value.username?(o(),r("div",J,h(a.value.username),1)):d("",!0)]),s("div",L,[e[3]||(e[3]=s("label",{class:"form-label",for:"password"},"Password",-1)),w(s("input",{type:"password",class:"form-control mb-0",id:"password","onUpdate:modelValue":e[1]||(e[1]=c=>u.value=c),placeholder:"Enter password",autocomplete:"current-password","aria-label":"Password"},null,512),[[y,u.value]]),a.value.password?(o(),r("div",Q,h(a.value.password),1)):d("",!0)]),s("div",Y,[e[5]||(e[5]=s("div",{class:"form-check d-inline-block pt-1 mb-0"},[s("input",{type:"checkbox",class:"form-check-input",id:"customCheck11"}),s("label",{class:"form-check-label",for:"customCheck11"},"Remember Me")],-1)),b(n,{to:{name:"request-password-reset"}},{default:f(()=>e[4]||(e[4]=[U("Forgot password")])),_:1})]),s("div",z,[t.value?d("",!0):(o(),r("button",{key:0,type:"submit",class:"btn btn-primary",disabled:t.value,"aria-label":"Sign in"},"Sign in",8,G)),t.value?(o(),r("span",H)):d("",!0)])],32)]),_:1})])])])}}};export{O as default};

import{_ as X,z as ee,k as L,I as ae,A as Y,j as n,q as z,r as P,o as d,c as u,d as o,w as s,f as j,b as t,t as k,n as v,l as W,e as q,p as G,g as K,m as T,v as E,J as O,G as R}from"./index.f2403e4a.js";import{C as Q}from"./component.0efb5bb1.js";import"./pdfjs.7adb8c57.js";const te={key:0,class:"error","aria-live":"polite"},oe={key:0,class:"error","aria-live":"polite"},se={key:0,class:"error","aria-live":"polite"},le={key:0,class:"error","aria-live":"polite"},re={key:0,class:"error","aria-live":"polite"},ne={__name:"UserSettings",props:{user_id:{type:String,required:!0}},setup(F){const B=F;ee(()=>B.user_id,async()=>{await M()});const A=L(),l=ae(),h=Y(),{proxy:C}=G(),r=n({}),V=n(["08:00 ","09:00 ","10:00 ","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"]),$=n("");$.value=A.getUserId();const U=n(""),b=n({user_id:$,start_time:"",end_time:"",booking_window:"",slot_duration:"",advanced_booking:""});function y(){const c=!l.weekend;l.setWeekendPreference(c)}const M=async()=>{r.value={};try{const c=await h.get(`v1/scheduler/settings/${$.value}`);b.value={start_time:c.data.dataPayload.data.start_time,end_time:c.data.dataPayload.data.end_time,booking_window:c.data.dataPayload.data.booking_window,slot_duration:c.data.dataPayload.data.slot_duration,advanced_booking:c.data.dataPayload.data.advanced_booking},U.value=c.data.dataPayload.data.id}catch{C.$showToast({title:"An error occurred ",text:"an error has occured while getting your settings!",icon:"success"})}},D=async()=>{var c;r.value={};try{const a=await h.put(`v1/scheduler/settings/${U.value}`,b.value);a.data.toastPayload&&C.$showAlert({title:a.data.toastPayload.toastTheme,text:a.data.toastPayload.toastMessage,icon:a.data.toastPayload.toastTheme,showCancelButton:!1,showConfirmButton:!1,timer:2e3})}catch(a){r.value=(c=a.response.data.errorPayload)==null?void 0:c.errors,a.response.status!==422&&C.$showAlert({title:"Failed",text:a.response.data.errorPayload.message,icon:"error"})}};return z(()=>{M()}),(c,a)=>{const _=P("b-form-input"),p=P("b-form-group"),i=P("b-col"),S=P("b-form-checkbox"),f=P("b-row"),x=P("b-card"),g=P("b-form");return d(),u("div",null,[o(x,null,{default:s(()=>[o(g,{onSubmit:j(D,["prevent"])},{default:s(()=>[o(x,{class:"mb-3 p-3 shadow"},{default:s(()=>[a[5]||(a[5]=t("h4",{class:"text-green"},"Working Hours",-1)),o(f,{class:""},{default:s(()=>[o(i,{md:"12"},{default:s(()=>[o(p,{label:"Start Time","label-for":"working-hours-start"},{default:s(()=>[o(_,{id:"working-hours-start",modelValue:b.value.start_time,"onUpdate:modelValue":a[0]||(a[0]=m=>b.value.start_time=m),type:"time"},null,8,["modelValue"]),r.value.start_time?(d(),u("div",te,k(r.value.start_time),1)):v("",!0)]),_:1})]),_:1}),o(i,{md:"12"},{default:s(()=>[o(p,{label:"End Time","label-for":"working-hours-end"},{default:s(()=>[o(_,{id:"working-hours-end",modelValue:b.value.end_time,"onUpdate:modelValue":a[1]||(a[1]=m=>b.value.end_time=m),options:V.value},null,8,["modelValue","options"]),r.value.end_time?(d(),u("div",oe,k(r.value.end_time),1)):v("",!0)]),_:1})]),_:1}),o(i,{md:"12"},{default:s(()=>[o(p,{label:"Enable Weekends","label-for":"enable-weekends-toggle"},{default:s(()=>[o(S,{id:"enable-weekends-toggle",checked:W(l).weekend,onChange:y,switch:""},{default:s(()=>[q(k(W(l).weekend?"Enabled":"Disabled"),1)]),_:1},8,["checked"])]),_:1})]),_:1})]),_:1})]),_:1}),o(x,{class:"mb-3 p-3 shadow"},{default:s(()=>[a[6]||(a[6]=t("h4",null,"Booking Settings",-1)),o(f,null,{default:s(()=>[o(i,{md:"12",class:"mb-4"},{default:s(()=>[o(p,{label:"Booking Window (in months)","label-for":"booking-window"},{default:s(()=>[o(_,{id:"booking-window",type:"number",modelValue:b.value.booking_window,"onUpdate:modelValue":a[2]||(a[2]=m=>b.value.booking_window=m)},null,8,["modelValue"]),r.value.booking_window?(d(),u("div",se,k(r.value.booking_window),1)):v("",!0)]),_:1})]),_:1}),o(i,{md:"12"},{default:s(()=>[o(p,{label:"Slot Duration (in minutes)","label-for":"slot-duration"},{default:s(()=>[o(_,{id:"slot-duration",type:"number",modelValue:b.value.slot_duration,"onUpdate:modelValue":a[3]||(a[3]=m=>b.value.slot_duration=m)},null,8,["modelValue"]),r.value.slot_duration?(d(),u("div",le,k(r.value.slot_duration),1)):v("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),o(x,{class:"mb-3 p-3 shadow"},{default:s(()=>[a[7]||(a[7]=t("h4",null,"Buffer Time",-1)),o(f,null,{default:s(()=>[o(i,{md:"12"},{default:s(()=>[o(p,{label:"Buffer Time (in minutes)","label-for":"buffer-time"},{default:s(()=>[o(_,{id:"buffer-time",type:"number",modelValue:b.value.advanced_booking,"onUpdate:modelValue":a[4]||(a[4]=m=>b.value.advanced_booking=m)},null,8,["modelValue"]),r.value.advanced_booking?(d(),u("div",re,k(r.value.advanced_booking),1)):v("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),a[8]||(a[8]=t("div",{class:"text-center"},[t("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))]),_:1})]),_:1})])}}};var de=X(ne,[["__scopeId","data-v-7c6f9de6"]]);const ie={class:"mb-3"},ue={key:0,class:"error","aria-live":"polite"},ce={class:"mb-3"},pe={key:0,class:"error","aria-live":"polite"},me={class:"mb-3"},ve={key:0,class:"error","aria-live":"polite"},fe={class:"mb-3"},_e={key:0,class:"error","aria-live":"polite"},be={class:"d-flex justify-content-center mt-5"},ye={key:1,class:"btn btn-primary",type:"button",disabled:""},ge={__name:"SpaceUpdate",setup(F){const B=L(),A=n(""),l=n({}),{proxy:h}=G(),C=Y(),r=n({}),V=n(!1),$=n("");$.value=B.getUserId();const U={enableTime:!1,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:5,allowInput:!1},y=n({...{name:"",level_id:"",opening_time:"",closing_time:"",capacity:""}}),M=async c=>{var a,_,p,i,S,f,x;try{const g=await C.get(`v1/scheduler/space/${c}`);y.value=g.data.dataPayload.data}catch(g){const m=((i=(p=(_=(a=g==null?void 0:g.response)==null?void 0:a.data)==null?void 0:_.errorPayload)==null?void 0:p.errors)==null?void 0:i.message)||((x=(f=(S=g==null?void 0:g.response)==null?void 0:S.data)==null?void 0:f.errorPayload)==null?void 0:x.message)||(g==null?void 0:g.message)||"An unknown error occurred";h.$showToast({title:"An error occurred",text:m,icon:"error"})}},D=async c=>{var a,_,p;try{V.value=!0;const i=await C.put(`v1/scheduler/space/${c}`,y.value);i.data.toastPayload?(l.value=i.data.toastPayload,h.$showToast({title:l.value.toastMessage||"Updated successfully",icon:"success"})):h.$showAlert({title:"Updated successfully",icon:"success",showCancelButton:!1,showConfirmButton:!1,timer:4e3})}catch(i){if((i==null?void 0:i.response)&&((a=i.response)==null?void 0:a.data)&&((_=i.response)==null?void 0:_.data.errorPayload))r.value=i.response.data.errorPayload.errors;else{const S=((p=i.response.data.errorPayload.errors)==null?void 0:p.message)||"An unknown error occurred";h.$showToast({title:"An error occurred",text:S,icon:"error"})}}finally{V.value=!1}};return z(()=>{A.value=B.getRole(),A.value!=="su"&&M($.value)}),(c,a)=>{const _=P("b-col"),p=P("b-row"),i=P("b-button"),S=P("b-card");return d(),K(S,{class:"mb-3 p-3 shadow"},{default:s(()=>[o(p,null,{default:s(()=>[o(_,{md:"12"},{default:s(()=>[t("div",ie,[a[5]||(a[5]=t("label",{for:"startDatePicker",class:"form-label"},"Name",-1)),T(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=f=>y.value.name=f),class:"form-control",id:"name"},null,512),[[E,y.value.name]])]),r.value.name?(d(),u("div",ue,k(r.value.name),1)):v("",!0)]),_:1})]),_:1}),o(p,null,{default:s(()=>[o(_,{md:"6"},{default:s(()=>[t("div",ce,[a[6]||(a[6]=t("label",{for:"startTimePicker",class:"form-label"},"Opening Hours",-1)),o(W(Q),{modelValue:y.value.opening_time,"onUpdate:modelValue":a[1]||(a[1]=f=>y.value.opening_time=f),class:"form-control",config:U,id:"startTimePicker",disabled:""},null,8,["modelValue"])]),r.value.opening_time?(d(),u("div",pe,k(r.value.opening_time),1)):v("",!0)]),_:1}),o(_,{md:"6"},{default:s(()=>[t("div",me,[a[7]||(a[7]=t("label",{for:"endTimePicker",class:"form-label"},"Closing Hours",-1)),o(W(Q),{modelValue:y.value.closing_time,"onUpdate:modelValue":a[2]||(a[2]=f=>y.value.closing_time=f),class:"form-control",config:U,id:"endTimePicker",disabled:""},null,8,["modelValue"])]),r.value.closing_time?(d(),u("div",ve,k(r.value.closing_time),1)):v("",!0)]),_:1})]),_:1}),o(p,{md:"6"},{default:s(()=>[o(_,{md:"12"},{default:s(()=>[t("div",fe,[a[8]||(a[8]=t("label",{for:"capacity",class:"form-label"},"Capacity",-1)),T(t("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=f=>y.value.capacity=f),class:"form-control",id:"capacity"},null,512),[[E,y.value.capacity]])]),r.value.capacity?(d(),u("div",_e,k(r.value.capacity),1)):v("",!0)]),_:1})]),_:1}),t("div",be,[V.value===!1?(d(),K(i,{key:0,onClick:a[4]||(a[4]=f=>D(y.value.id)),variant:"primary"},{default:s(()=>a[9]||(a[9]=[q("Update")])),_:1})):(d(),u("button",ye,a[10]||(a[10]=[t("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),q(" Updating... ")])))])]),_:1})}}};const we={class:"bd-example bg-white"},ke={class:"nav nav-tabs",id:"nav-tab",role:"tablist"},Pe={key:0,class:"nav-link",id:"nav-contact-tab","data-bs-toggle":"tab","data-bs-target":"#nav-contact",type:"button",role:"tab","aria-controls":"nav-contact","aria-selected":"false"},he={key:1,class:"nav-link",id:"nav-office-tab","data-bs-toggle":"tab","data-bs-target":"#nav-office",type:"button",role:"tab","aria-controls":"nav-office","aria-selected":"false"},xe={class:"tab-content iq-tab-fade-up",id:"simple-tab-content"},$e={class:"tab-pane fade show active",id:"nav-profile",role:"tabpanel","aria-labelledby":"nav-profile-tab"},Ve={class:"col-xl-12 col-lg-12"},Ue={class:"new-user-info pb-5"},Se={key:0,class:"error","aria-live":"polite"},Te={key:0,class:"error","aria-live":"polite"},Ce={key:0,class:"error","aria-live":"polite"},Me={key:0,class:"error","aria-live":"polite"},Ae={key:0,class:"error","aria-live":"polite"},Ie={class:"tab-pane fade",id:"nav-password",role:"tabpanel","aria-labelledby":"nav-password-tab"},Ne={class:"col-xl-12 col-lg-12"},Be={class:"row"},De={class:"position-relative"},Ee=["type"],We={key:0,class:"error","aria-live":"polite"},Fe={class:"position-relative"},He=["type"],Oe={key:0,class:"error","aria-live":"polite"},Re={class:"position-relative"},je=["type"],qe={key:0,class:"error","aria-live":"polite"},Le={key:0,class:"tab-pane fade",id:"nav-contact",role:"tabpanel","aria-labelledby":"nav-contact-tab"},Ye={key:1,class:"tab-pane fade",id:"nav-office",role:"tabpanel","aria-labelledby":"nav-office-tab"},ze={__name:"ProfileView",setup(F){const B=L(),A=Y(),l=n({}),{proxy:h}=G(),C=n(""),r=n(""),V=n(""),$=n(""),U=n(""),b=n(""),y=n(""),M=n(""),D=n(""),c=n(""),a=n("");z(()=>{_(),c.value=B.getUserId(),a.value=B.getRole()});const _=async()=>{var m;try{const e=await A.get("/v1/auth/profile-view");C.value=e.data.dataPayload.data.username,$.value=e.data.dataPayload.data.first_name,U.value=e.data.dataPayload.data.middle_name,b.value=e.data.dataPayload.data.last_name,y.value=e.data.dataPayload.data.mobile_number,M.value=e.data.dataPayload.data.email_address}catch(e){if(e.response&&e.response.data&&e.response.data.errorPayload)l.value=e.response.data.errorPayload.errors;else{const I=((m=e.response.data.errorPayload.errors)==null?void 0:m.message)||"An unknown error occurred";h.$showToast({title:"An error occurred",text:I,icon:"error"})}}},p=n({}),i=async()=>{var m;l.value="";try{const e=await A.put("v1/auth/profile-update",{username:C.value,password:r.value,confirm_password:V.value,first_name:$.value,middle_name:U.value,last_name:b.value,mobile_number:y.value,email_address:M.value});e.data.toastPayload?(p.value=e.data.toastPayload,h.$showToast({title:p.value.toastMessage||"Updated successfully",icon:"success"})):h.$showToast({title:"Updated successfully",icon:"success"}),_()}catch(e){if(e.response&&e.response.data&&e.response.data.errorPayload)l.value=e.response.data.errorPayload.errors;else{const I=((m=e.response.data.errorPayload.errors)==null?void 0:m.message)||"An unknown error occurred";h.$showToast({title:"An error occurred",text:I,icon:"error"})}}},S=async()=>{var m;l.value="";try{const e=await A.post("v1/auth/update-password",{newPassword:r.value,confirm_password:V.value,oldPassword:D.value});e.data.toastPayload?(p.value=e.data.toastPayload,h.$showToast({title:p.value.toastMessage||"Updated successfully",icon:"success"})):h.$showToast({title:"Updated successfully",icon:"success"})}catch(e){if(e.response&&e.response.data&&e.response.data.errorPayload)l.value=e.response.data.errorPayload.errors;else{const I=((m=e.response.data.errorPayload.errors)==null?void 0:m.message)||"An unknown error occurred";h.$showToast({title:"An error occurred",text:I,icon:"error"})}}},f=n(!1),x=n(!1),g=n(!1);return(m,e)=>{const I=P("card-header"),N=P("b-col"),H=P("b-row"),Z=P("b-card-body"),J=P("b-card");return d(),u("div",we,[t("nav",null,[t("div",ke,[e[11]||(e[11]=t("button",{class:"nav-link active d-flex align-items-center",id:"nav-profile-tab","data-bs-toggle":"tab","data-bs-target":"#nav-profile",type:"button",role:"tab","aria-controls":"nav-profile","aria-selected":"true"},"Profile",-1)),a.value==="user"||a.value==="registrar"?(d(),u("button",Pe,"Settings")):v("",!0),e[12]||(e[12]=t("button",{class:"nav-link",id:"nav-password-tab","data-bs-toggle":"tab","data-bs-target":"#nav-password",type:"button",role:"tab","aria-controls":"nav-password","aria-selected":"false"},"Password",-1)),a.value==="user"||a.value==="registrar"?(d(),u("button",he,"My Office")):v("",!0)])]),t("div",xe,[t("div",$e,[o(J,{class:"mb-3 p-3 shadow"},{default:s(()=>[o(H,null,{default:s(()=>[t("div",Ve,[t("div",null,[o(I,{class:"card-header d-flex justify-content-between"}),o(Z,null,{default:s(()=>[t("div",Ue,[t("form",{onSubmit:j(i,["prevent"])},[o(H,null,{default:s(()=>[o(N,{md:"12",lg:"4",class:"form-group"},{default:s(()=>[e[13]||(e[13]=t("label",{class:"form-label",for:"fname"},"First Name:",-1)),T(t("input",{"onUpdate:modelValue":e[0]||(e[0]=w=>$.value=w),type:"text",class:"form-control",id:"fname",placeholder:"First Name"},null,512),[[E,$.value]]),l.value.first_name?(d(),u("div",Se,k(l.value.first_name),1)):v("",!0)]),_:1}),o(N,{md:"12",lg:"4",class:"form-group"},{default:s(()=>[e[14]||(e[14]=t("label",{class:"form-label",for:"cname"},"Middle Name:",-1)),T(t("input",{"onUpdate:modelValue":e[1]||(e[1]=w=>U.value=w),type:"text",class:"form-control",id:"cname",placeholder:"Middle Name"},null,512),[[E,U.value]]),l.value.middle_name?(d(),u("div",Te,k(l.value.middle_name),1)):v("",!0)]),_:1}),o(N,{md:"12",lg:"4",class:"form-group"},{default:s(()=>[e[15]||(e[15]=t("label",{class:"form-label",for:"lname"},"Last Name:",-1)),T(t("input",{"onUpdate:modelValue":e[2]||(e[2]=w=>b.value=w),type:"text",class:"form-control",id:"lname",placeholder:"Last Name"},null,512),[[E,b.value]]),l.value.last_name?(d(),u("div",Ce,k(l.value.last_name),1)):v("",!0)]),_:1}),o(N,{md:"6",lg:"4",class:"form-group"},{default:s(()=>[e[16]||(e[16]=t("label",{class:"form-label",for:"mobno"},"Mobile Number:",-1)),T(t("input",{"onUpdate:modelValue":e[3]||(e[3]=w=>y.value=w),type:"text",class:"form-control",id:"mobno",placeholder:"Mobile Number"},null,512),[[E,y.value]]),l.value.mobile_number?(d(),u("div",Me,k(l.value.mobile_number),1)):v("",!0)]),_:1}),o(N,{md:"6",lg:"4",class:"form-group"},{default:s(()=>[e[17]||(e[17]=t("label",{class:"form-label",for:"email"},"Email:",-1)),T(t("input",{"onUpdate:modelValue":e[4]||(e[4]=w=>M.value=w),type:"email",class:"form-control",id:"email",placeholder:"Email"},null,512),[[E,M.value]]),l.value.email_address?(d(),u("div",Ae,k(l.value.email_address),1)):v("",!0)]),_:1})]),_:1}),e[18]||(e[18]=t("button",{type:"submit",class:"btn btn-primary"},"Update",-1))],32)])]),_:1})])])]),_:1})]),_:1})]),t("div",Ie,[o(J,{class:"mb-3 p-3 shadow"},{default:s(()=>[o(H,{class:"mt-5"},{default:s(()=>[t("div",Ne,[t("div",null,[o(I,{class:""},{default:s(()=>[e[23]||(e[23]=t("div",{class:"header-title"},[t("h4",{class:"mb-2"},"Change Password")],-1)),t("div",null,[t("form",{onSubmit:j(S,["prevent"]),class:"mt-3"},[t("div",Be,[o(N,{md:"12",class:"form-group"},{default:s(()=>[e[19]||(e[19]=t("label",{class:"form-label",for:"oldpass"},"Current Password:",-1)),t("div",De,[T(t("input",{"onUpdate:modelValue":e[5]||(e[5]=w=>D.value=w),type:f.value?"text":"password",class:"form-control pe-5",id:"oldpass",placeholder:"Current Password"},null,8,Ee),[[O,D.value]]),t("i",{class:R(["fas",f.value?"fa-eye":"fa-eye-slash"]),onClick:e[6]||(e[6]=w=>f.value=!f.value),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",cursor:"pointer"}},null,2)]),l.value.oldPassword?(d(),u("div",We,k(l.value.oldPassword),1)):v("",!0)]),_:1}),o(N,{md:"12",class:"form-group"},{default:s(()=>[e[20]||(e[20]=t("label",{class:"form-label",for:"pass"},"Password:",-1)),t("div",Fe,[T(t("input",{"onUpdate:modelValue":e[7]||(e[7]=w=>r.value=w),type:x.value?"text":"password",class:"form-control pe-5",id:"pass",placeholder:"New Password"},null,8,He),[[O,r.value]]),t("i",{class:R(["fas",x.value?"fa-eye":"fa-eye-slash"]),onClick:e[8]||(e[8]=w=>x.value=!x.value),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",cursor:"pointer"}},null,2)]),l.value.newPassword?(d(),u("div",Oe,k(l.value.newPassword),1)):v("",!0)]),_:1}),o(N,{md:"12",class:"form-group"},{default:s(()=>[e[21]||(e[21]=t("label",{class:"form-label",for:"rpass"},"Repeat Password:",-1)),t("div",Re,[T(t("input",{"onUpdate:modelValue":e[9]||(e[9]=w=>V.value=w),type:g.value?"text":"password",class:"form-control pe-5",id:"rpass",placeholder:"Repeat Password"},null,8,je),[[O,V.value]]),t("i",{class:R(["fas",g.value?"fa-eye":"fa-eye-slash"]),onClick:e[10]||(e[10]=w=>g.value=!g.value),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",cursor:"pointer"}},null,2)]),l.value.confirm_password?(d(),u("div",qe,k(l.value.confirm_password),1)):v("",!0)]),_:1})]),e[22]||(e[22]=t("button",{type:"submit",class:"btn btn-primary"},"Update",-1))],32)])]),_:1})])])]),_:1})]),_:1})]),a.value==="user"||a.value==="registrar"?(d(),u("div",Le,[o(de,{user_id:c.value},null,8,["user_id"])])):v("",!0),a.value==="user"||a.value==="registrar"?(d(),u("div",Ye,[o(ge)])):v("",!0)])])}}};var Qe=X(ze,[["__scopeId","data-v-89e812cc"]]);export{Qe as default};

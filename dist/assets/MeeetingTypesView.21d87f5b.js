import{A as R,j as u,q as W,r as c,o as n,c as d,d as s,w as l,b as t,e as b,m as X,D as Y,F as C,C as M,G as _,t as w,n as S,g as z,p as Z}from"./index.848ef5b1.js";import"./pdfjs.7adb8c57.js";const ee={class:"d-flex justify-content-between"},te={class:"d-flex align-items-center"},ae=["value"],oe={class:"d-flex align-items-center",style:{width:"20%"}},se={class:"table-responsive"},le={class:"table table-hover"},ne=["onClick"],re=["onClick"],de={key:1},ie={"aria-label":"Page navigation"},ue={class:"pagination justify-content-end"},ce=["disabled"],pe=["onClick"],me=["disabled"],ye={key:0,class:"error"},fe={class:"d-flex justify-content-center"},ve={key:1,class:"btn btn-primary",type:"button",disabled:""},be={key:0,class:"error"},ge={class:"d-flex justify-content-center"},he={key:1,class:"btn btn-primary",type:"button",disabled:""},Ce={__name:"MeeetingTypesView",setup(_e){const g=R(),{proxy:r}=Z(),k=u([]),f=u(!1),T=u(20),i=u(1),$=u(""),D=u([20,50]),h=u(1),U=u(20),p=u({}),v=u({}),m=async o=>{try{const e=await g.get(`/v1/scheduler/meeting-types?page=${o}&perPage=${T.value}&_search=${$.value}`);k.value=e.data.dataPayload.data,i.value=e.data.dataPayload.currentPage,h.value=e.data.dataPayload.totalPages,U.value=e.data.dataPayload.perPage}catch(e){console.error(e)}},H=async o=>{try{const e=await g.get(`/v1/scheduler/meeting-type/${o}`);p.value=e.data.dataPayload.data}catch(e){e.response.status!==422&&r.$showAlert({title:e.response.data.errorPayload.toastTheme,text:e.response.data.errorPayload.toastMessage,icon:e.response.data.errorPayload.toastTheme,showCancelButton:!1,showConfirmButton:!1,timer:3e3})}},E=async()=>{var o;f.value=!0;try{const e=await g.post("/v1/scheduler/meeting-type",p.value);e.data.toastPayload&&(r.$refs.modal2.hide(),m(1),r.$showAlert({title:e.data.toastPayload.toastTheme,text:e.data.toastPayload.toastMessage,icon:e.data.toastPayload.toastTheme,showCancelButton:!1,showConfirmButton:!1,timer:3e3}))}catch(e){v.value=(o=e.response.data.errorPayload)==null?void 0:o.errors,e.response.status!==422&&r.$showAlert({title:e.response.data.toastPayload.toastTheme,text:e.response.data.toastPayload.toastMessage,icon:e.response.data.toastPayload.toastTheme,showCancelButton:!1,showConfirmButton:!1,timer:3e3})}finally{f.value=!1}},I=async()=>{var o;f.value=!0;try{const e=await g.put(`/v1/scheduler/meeting-type/${p.value.id}`,p.value);e.data.toastPayload&&(r.$refs.modal.hide(),r.$showAlert({title:e.data.toastPayload.toastTheme,text:e.data.toastPayload.toastMessage,icon:e.data.toastPayload.toastTheme,showCancelButton:!1,showConfirmButton:!1,timer:3e3})),m(1)}catch(e){v.value=(o=e.response.data.errorPayload)==null?void 0:o.errors,e.response.status!==422&&r.$showAlert({title:e.response.data.errorPayload.toastTheme,text:e.response.data.errorPayload.toastMessage,icon:e.response.data.errorPayload.toastTheme,showCancelButton:!1,showConfirmButton:!1,timer:3e3})}finally{f.value=!1}},F=async o=>{try{const e=await g.delete(`/v1/scheduler/meeting-type/${o}`);e.data.toastPayload&&(m(1),r.$showAlert({title:e.data.toastPayload.toastTheme,text:e.data.toastPayload.toastMessage,icon:e.data.toastPayload.toastTheme,showCancelButton:!1,showConfirmButton:!1,timer:3e3}))}catch(e){e.response.status!==422&&r.$showAlert({title:e.response.data.errorPayload.toastTheme,text:e.response.data.errorPayload.toastMessage,icon:e.response.data.errorPayload.toastTheme,showCancelButton:!1,showConfirmButton:!1,timer:3e3})}},q=(o,e)=>{r.$showAlert({icon:"warning",title:"Are you sure?",text:"Are you sure you want to "+[e?"restore":"delete"]+" this meeting type?",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Submit",confirmButtonColor:"#097B3E",cancelButtonColor:"#d33"}).then(y=>{y.isConfirmed&&F(o)})},G=async()=>{i.value=1,await m(1)},B=o=>{o>0&&o<=h.value&&(i.value=o,m(o))},L=o=>{r.$refs.modal.show(),H(o)},O=()=>{r.$refs.modal2.show()};return W(()=>{m(1)}),(o,e)=>{const y=c("b-col"),P=c("b-button"),V=c("b-row"),x=c("b-form-input"),Q=c("b-input-group-append"),J=c("b-input-group"),K=c("b-card"),A=c("b-form-group"),N=c("b-modal");return n(),d(C,null,[s(y,{lg:"12"},{default:l(()=>[s(K,null,{default:l(()=>[s(V,{class:"mb-5"},{default:l(()=>[s(y,{lg:"6"},{default:l(()=>e[9]||(e[9]=[t("h2",null,"Meeting Types",-1)])),_:1}),s(y,{lg:"6",class:"d-flex justify-content-end"},{default:l(()=>[s(P,{variant:"primary",onClick:e[0]||(e[0]=a=>O())},{default:l(()=>e[10]||(e[10]=[b(" New Meeting type ")])),_:1})]),_:1})]),_:1}),s(V,{clas:"mb-3"},{default:l(()=>[s(y,{lg:"12",md:"12",sm:"12"},{default:l(()=>[t("div",ee,[t("div",te,[X(t("select",{id:"itemsPerPage","onUpdate:modelValue":e[1]||(e[1]=a=>T.value=a),onChange:G,class:"form-select form-select-sm",style:{width:"auto"}},[(n(!0),d(C,null,M(D.value,a=>(n(),d("option",{key:a,value:a},w(a),9,ae))),128))],544),[[Y,T.value]])]),t("div",oe,[s(J,null,{default:l(()=>[s(x,{placeholder:"Search...","aria-label":"Search",modelValue:$.value,"onUpdate:modelValue":e[2]||(e[2]=a=>$.value=a),onChange:e[3]||(e[3]=a=>m(1))},null,8,["modelValue"]),s(Q,null,{default:l(()=>[s(P,{variant:"primary",onClick:e[4]||(e[4]=a=>m(1))},{default:l(()=>e[11]||(e[11]=[b(" Search ")])),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1}),t("div",se,[t("table",le,[e[13]||(e[13]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Name"),t("th",{scope:"col"},"Actions")])],-1)),t("tbody",null,[k.value.length>0?(n(!0),d(C,{key:0},M(k.value,a=>(n(),d("tr",{key:a.id},[t("td",null,w(a.type),1),t("td",null,[t("button",{class:"btn btn-outline-info btn-sm me-3",size:"sm",onClick:j=>L(a.id)},[t("i",{class:_(["fas",a.is_deleted?"fa-eye":"fa-edit"])},null,2)],8,ne),t("button",{class:"btn btn-outline-danger btn-sm me-3",size:"sm",onClick:j=>q(a.id,a.is_deleted)},[t("i",{class:_(["fas",a.is_deleted?"fa-undo":"fa-trash"])},null,2)],8,re)])]))),128)):(n(),d("tr",de,e[12]||(e[12]=[t("td",{class:"text-center"},"No meeting types found",-1)])))])])]),s(y,{sm:"12",lg:"12",md:"12",class:"d-flex justify-content-end mt-5 mb-n5"},{default:l(()=>[t("nav",ie,[t("ul",ue,[t("li",{class:_(["page-item",{disabled:i.value===1}])},[t("button",{class:"page-link",onClick:e[5]||(e[5]=a=>B(i.value-1)),disabled:i.value===1},"Previous",8,ce)],2),(n(!0),d(C,null,M(h.value,a=>(n(),d("li",{key:a,class:_(["page-item",{active:i.value===a}])},[t("button",{class:"page-link",onClick:j=>B(a)},w(a),9,pe)],2))),128)),t("li",{class:_(["page-item",{disabled:i.value===h.value}])},[t("button",{class:"page-link",onClick:e[6]||(e[6]=a=>B(i.value+1)),disabled:i.value===h.value},"Next",8,me)],2)])])]),_:1})]),_:1})]),_:1}),s(N,{ref:"modal",id:"modal",title:"Edit Meeting Type",class:"p-4 custom-modal-body","no-close-on-backdrop":"","no-close-on-esc":"",size:"l","hide-footer":"",onHide:o.handleClose},{default:l(()=>[s(A,{label:"Type","label-for":"Type",class:"mb-3"},{default:l(()=>[s(x,{id:"Type",modelValue:p.value.type,"onUpdate:modelValue":e[7]||(e[7]=a=>p.value.type=a)},null,8,["modelValue"]),v.value.type?(n(),d("div",ye,w(v.value.type),1)):S("",!0)]),_:1}),t("div",fe,[f.value===!1?(n(),z(P,{key:0,onClick:I,variant:"primary",disabled:o.is_deleted},{default:l(()=>e[14]||(e[14]=[b("Update")])),_:1},8,["disabled"])):(n(),d("button",ve,e[15]||(e[15]=[t("span",{class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},null,-1),b(" submitting... ")])))])]),_:1},8,["onHide"]),s(N,{ref:"modal2",id:"modal2",title:"New Meeting Type",class:"p-4 custom-modal-body","no-close-on-backdrop":"","no-close-on-esc":"",size:"l","hide-footer":"",onHide:o.handleClose},{default:l(()=>[s(A,{label:"Type","label-for":"Type",class:"mb-3"},{default:l(()=>[s(x,{id:"Type",modelValue:p.value.type,"onUpdate:modelValue":e[8]||(e[8]=a=>p.value.type=a)},null,8,["modelValue"]),v.value.type?(n(),d("div",be,w(v.value.type),1)):S("",!0)]),_:1}),t("div",ge,[f.value===!1?(n(),z(P,{key:0,onClick:E,variant:"primary"},{default:l(()=>e[16]||(e[16]=[b("Save")])),_:1})):(n(),d("button",he,e[17]||(e[17]=[t("span",{class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},null,-1),b(" submitting... ")])))])]),_:1},8,["onHide"])],64)}}};export{Ce as default};

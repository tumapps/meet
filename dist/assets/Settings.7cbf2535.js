import{A as j,B as H,p as M,h as r,r as u,o as m,c as _,d as t,w as o,b as l,C as W,t as c,l as b,j as w,e as L,m as O}from"./index.2edcf246.js";import{C as y}from"./component.ad415b8e.js";const R={key:0,class:"error","aria-live":"polite"},Y={key:0,class:"error","aria-live":"polite"},h={class:"mb-3"},z={class:"mb-3"},G={class:"mb-3"},J={class:"mb-3"},K={key:0,class:"error","aria-live":"polite"},Q={class:"d-flex justify-content-end"},X={key:0,class:"error","aria-live":"polite"},Z={key:0,class:"error","aria-live":"polite"},ee={key:0,class:"error","aria-live":"polite"},le={__name:"Settings",setup(te){const V=j(),{proxy:p}=O();H(),M(()=>{D()});const n=r({start_time:"",end_time:"",booking_window:"",slot_duration:"",advanced_booking:""}),A=r(["08:00 ","09:00 ","10:00 ","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"]),x=r("212409003"),B=r(""),d=r({user_id:x.value,start_time:"",end_time:"",booking_window:"",slot_duration:"",advanced_booking:""}),D=async()=>{try{const s=await V.get(`v1/scheduler/settings/${x.value}`);d.value={start_time:s.data.dataPayload.data.start_time,end_time:s.data.dataPayload.data.end_time,booking_window:s.data.dataPayload.data.booking_window,slot_duration:s.data.dataPayload.data.slot_duration,advanced_booking:s.data.dataPayload.data.advanced_booking},B.value=s.data.dataPayload.data.id}catch{p.$showToast({title:"An error occurred ",text:"an error has occured while getting your settings!",icon:"success"})}},$={enableTime:!1,dateFormat:"Y-m-d"},q={enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},T=r(""),P=r(""),S=r(""),U=r(""),C=r(""),F=async()=>{try{const s=await V.post("v1/scheduler/availability",{user_id:x.value,start_date:T.value,end_date:P.value,start_time:S.value,end_time:U.value,description:C.value});p.$showToast({title:"Updated",text:"settings updated successfully!",icon:"success"})}catch{p.$showToast({title:"Failed",text:"failed to update your settings",icon:"error"})}},I=async()=>{try{const s=await V.put(`v1/scheduler/settings/${B.value}`,d.value);p.$showToast({title:"Updated",text:"settings updated successfully!",icon:"success"})}catch{p.$showToast({title:"Failed",text:"failed to update your settings",icon:"error"})}};return(s,e)=>{const v=u("b-form-input"),f=u("b-form-group"),i=u("b-col"),g=u("b-row"),k=u("b-card"),N=u("b-button"),E=u("b-form");return m(),_("div",null,[t(k,{class:""},{default:o(()=>[e[20]||(e[20]=l("h2",{class:"text-center mb-2"},"Scheduler Settings",-1)),t(E,{onSubmit:W(I,["prevent"])},{default:o(()=>[t(k,null,{default:o(()=>[e[10]||(e[10]=l("h4",{class:"text-green"},"Working Hours",-1)),t(g,{class:""},{default:o(()=>[t(i,{md:"12"},{default:o(()=>[t(f,{label:"Start Time","label-for":"working-hours-start"},{default:o(()=>[t(v,{id:"working-hours-start",modelValue:d.value.start_time,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value.start_time=a),type:"time",required:""},null,8,["modelValue"]),n.value.start_time?(m(),_("div",R,c(n.value.start_time),1)):b("",!0)]),_:1})]),_:1}),t(i,{md:"6"},{default:o(()=>[t(f,{label:"End Time","label-for":"working-hours-end"},{default:o(()=>[t(v,{id:"working-hours-end",modelValue:d.value.end_time,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value.end_time=a),options:A.value,required:""},null,8,["modelValue","options"]),n.value.end_time?(m(),_("div",Y,c(n.value.end_time),1)):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(k,null,{default:o(()=>[e[16]||(e[16]=l("h4",null,"Availability Settings",-1)),t(g,null,{default:o(()=>[t(i,{md:"6"},{default:o(()=>[l("div",h,[e[11]||(e[11]=l("label",{for:"datePicker",class:"form-label"},"Start Date",-1)),t(w(y),{modelValue:T.value,"onUpdate:modelValue":e[2]||(e[2]=a=>T.value=a),class:"form-control",config:$,id:"datePicker"},null,8,["modelValue"])])]),_:1}),t(i,{md:"5"},{default:o(()=>[l("div",z,[e[12]||(e[12]=l("label",{for:"datePicker",class:"form-label"},"Last Date",-1)),t(w(y),{modelValue:P.value,"onUpdate:modelValue":e[3]||(e[3]=a=>P.value=a),class:"form-control",config:$,id:"datePicker"},null,8,["modelValue"])])]),_:1})]),_:1}),t(g,null,{default:o(()=>[t(i,{md:"6"},{default:o(()=>[l("div",G,[e[13]||(e[13]=l("label",{for:"datePicker",class:"form-label"},"Start Time",-1)),t(w(y),{modelValue:S.value,"onUpdate:modelValue":e[4]||(e[4]=a=>S.value=a),class:"form-control",config:q,id:"datePicker"},null,8,["modelValue"])])]),_:1}),t(i,{md:"5"},{default:o(()=>[l("div",J,[e[14]||(e[14]=l("label",{for:"datePicker",class:"form-label"},"End Time",-1)),t(w(y),{modelValue:U.value,"onUpdate:modelValue":e[5]||(e[5]=a=>U.value=a),class:"form-control",config:q,id:"datePicker"},null,8,["modelValue"])])]),_:1}),t(i,{md:"12",class:"mb-3"},{default:o(()=>[t(f,{label:"Description","label-for":"description"},{default:o(()=>[t(v,{id:"description",type:"text",modelValue:C.value,"onUpdate:modelValue":e[6]||(e[6]=a=>C.value=a)},null,8,["modelValue"]),n.value.description?(m(),_("div",K,c(n.value.description),1)):b("",!0)]),_:1})]),_:1})]),_:1}),l("div",Q,[t(N,{onClick:F,variant:"primary"},{default:o(()=>e[15]||(e[15]=[L("Save")])),_:1})])]),_:1}),t(k,null,{default:o(()=>[e[17]||(e[17]=l("h4",null,"Booking Settings",-1)),t(g,null,{default:o(()=>[t(i,{md:"12",class:"mb-4"},{default:o(()=>[t(f,{label:"Booking Window (in months)","label-for":"booking-window"},{default:o(()=>[t(v,{id:"booking-window",type:"number",modelValue:d.value.booking_window,"onUpdate:modelValue":e[7]||(e[7]=a=>d.value.booking_window=a),min:"1",max:"12",required:""},null,8,["modelValue"]),n.value.booking_window?(m(),_("div",X,c(n.value.booking_window),1)):b("",!0)]),_:1})]),_:1}),t(i,{md:"12"},{default:o(()=>[t(f,{label:"Slot Duration (in minutes)","label-for":"slot-duration"},{default:o(()=>[t(v,{id:"slot-duration",type:"number",modelValue:d.value.slot_duration,"onUpdate:modelValue":e[8]||(e[8]=a=>d.value.slot_duration=a),min:"15",max:"60",required:""},null,8,["modelValue"]),n.value.slot_duration?(m(),_("div",Z,c(n.value.slot_duration),1)):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(k,{class:"mb-3 p-3 shadow"},{default:o(()=>[e[18]||(e[18]=l("h4",null,"Buffer Time",-1)),t(g,null,{default:o(()=>[t(i,{md:"12"},{default:o(()=>[t(f,{label:"Buffer Time (in minutes)","label-for":"buffer-time"},{default:o(()=>[t(v,{id:"buffer-time",type:"number",modelValue:d.value.advanced_booking,"onUpdate:modelValue":e[9]||(e[9]=a=>d.value.advanced_booking=a),min:"10",required:""},null,8,["modelValue"]),n.value.advanced_booking?(m(),_("div",ee,c(n.value.advanced_booking),1)):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e[19]||(e[19]=l("div",{class:"text-center"},[l("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))]),_:1})]),_:1})])}}};export{le as default};

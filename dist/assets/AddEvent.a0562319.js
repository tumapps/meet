import{A as Y,j as v,r as y,o as d,g as E,w as n,d as a,b as t,m as T,v as B,c as u,t as c,n as f,l as g,e as N,p as z}from"./index.e0205fad.js";import{C as k}from"./component.da87e159.js";const q={class:"mb-3"},G={key:0,class:"error","aria-live":"polite"},J={class:"mb-3"},K={key:0,class:"error","aria-live":"polite"},L={class:"mb-3"},O={key:0,class:"error","aria-live":"polite"},Q={class:"mb-3"},R={key:0,class:"error","aria-live":"polite"},W={class:"mb-3"},X={key:0,class:"error","aria-live":"polite"},Z={class:"mb-3"},ee={key:0,class:"error","aria-live":"polite"},te={class:"d-flex justify-content-center mt-5"},le={key:1,class:"btn btn-primary",type:"button",disabled:""},re={__name:"AddEvent",emits:["NewEvent"],setup(oe,{expose:A,emit:F}){const{proxy:V}=z(),I=Y(),o=v({}),_=v(!1),U=F,D=v({title:"",description:"",start_date:"",end_date:"",start_time:"",end_time:""}),l=v({...D.value}),p=v(null),w=v(""),M=()=>{l.value={...D.value}},S=()=>{o.value={}};function x(){S(),M()}const $=()=>{p.value&&p.value.show()},h=()=>{p.value&&p.value.hide()},P={dateFormat:"Y-m-d",altInput:!0,altFormat:"F j, Y",minDate:"today",disable:[function(m){return m.getDay()===6||m.getDay()===0}]},C={enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0},j=async(m=!1)=>{var e;try{_.value=!0;const s=m?"put":"post",i=m?`v1/scheduler/events/${l.value.id}`:"v1/scheduler/events",b=await I[s](i,l.value);U("NewEvent"),h(),x(),b.data.alertifyPayload&&(w.value=b.data.alertifyPayload,V.$showAlert({title:w.value.message,icon:w.value.theme,showCancelButton:!1,showConfirmButton:!1,timer:4e3,timerProgressBar:!0}))}catch(s){if(_.value=!1,s.response&&s.response.data.errorPayload)o.value=s.response.data.errorPayload.errors;else{const i=(e=s.response.data.errorPayload.errors)==null?void 0:e.message;V.$showToast({title:i,text:i,icon:"error"})}}finally{_.value=!1}};return A({showModal:$}),(m,e)=>{const s=y("b-col"),i=y("b-row"),b=y("b-button"),H=y("b-modal");return d(),E(H,{ref_key:"newEvent",ref:p,title:"Add Event",class:"p-4 custom-modal-body","no-close-on-backdrop":"","no-close-on-esc":"",size:"xl","hide-footer":"",onHide:x},{default:n(()=>[a(i,null,{default:n(()=>[a(s,{md:"12"},{default:n(()=>[t("div",q,[e[7]||(e[7]=t("label",{for:"startDatePicker",class:"form-label"},"Title",-1)),T(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>l.value.title=r),class:"form-control",id:"name"},null,512),[[B,l.value.title]])]),o.value.title?(d(),u("div",G,c(o.value.title),1)):f("",!0)]),_:1})]),_:1}),a(i,null,{default:n(()=>[a(s,{md:"12",lg:"6"},{default:n(()=>[t("div",J,[e[8]||(e[8]=t("label",{for:"levelDropdown",class:"form-label"},"Start Date ",-1)),a(g(k),{modelValue:l.value.start_date,"onUpdate:modelValue":e[1]||(e[1]=r=>l.value.start_date=r),class:"form-control",config:P,id:"startDatePicker"},null,8,["modelValue"])]),o.value.date?(d(),u("div",K,c(o.value.start_date),1)):f("",!0)]),_:1}),a(s,{md:"12",lg:"6"},{default:n(()=>[t("div",L,[e[9]||(e[9]=t("label",{for:"levelDropdown",class:"form-label"},"End Date ",-1)),a(g(k),{modelValue:l.value.end_date,"onUpdate:modelValue":e[2]||(e[2]=r=>l.value.end_date=r),class:"form-control",config:P,id:"startDatePicker"},null,8,["modelValue"])]),o.value.end_date?(d(),u("div",O,c(o.value.end_date),1)):f("",!0)]),_:1})]),_:1}),a(i,null,{default:n(()=>[a(s,{md:"6"},{default:n(()=>[t("div",Q,[e[10]||(e[10]=t("label",{for:"startTimePicker",class:"form-label"},"Start Time",-1)),a(g(k),{modelValue:l.value.start_time,"onUpdate:modelValue":e[3]||(e[3]=r=>l.value.start_time=r),class:"form-control",config:C,id:"startTimePicker"},null,8,["modelValue"])]),o.value.start_time?(d(),u("div",R,c(o.value.start_time),1)):f("",!0)]),_:1}),a(s,{md:"6"},{default:n(()=>[t("div",W,[e[11]||(e[11]=t("label",{for:"endTimePicker",class:"form-label"},"End Time",-1)),a(g(k),{modelValue:l.value.end_time,"onUpdate:modelValue":e[4]||(e[4]=r=>l.value.end_time=r),class:"form-control",config:C,id:"endTimePicker"},null,8,["modelValue"])]),o.value.end_time?(d(),u("div",X,c(o.value.end_time),1)):f("",!0)]),_:1})]),_:1}),a(i,null,{default:n(()=>[a(s,{md:"12"},{default:n(()=>[t("div",Z,[e[12]||(e[12]=t("label",{for:"description",class:"form-label"},"Description",-1)),T(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=r=>l.value.description=r),class:"form-control",id:"description",rows:"5"},null,512),[[B,l.value.description]])]),o.value.description?(d(),u("div",ee,c(o.value.description),1)):f("",!0)]),_:1})]),_:1}),t("div",te,[_.value===!1?(d(),E(b,{key:0,onClick:e[6]||(e[6]=r=>j()),variant:"primary"},{default:n(()=>e[13]||(e[13]=[N("Submit")])),_:1})):(d(),u("button",le,e[14]||(e[14]=[t("span",{class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},null,-1),N(" submitting... ")])))])]),_:1},512)}}};export{re as _};

import{i as T,A as P,D as q,s as $,h as d,r as i,o as r,c as u,d as e,w as o,b as m,E as A,t as v,l as p,m as C}from"./index.91d534ba.js";import"./component.0be391dc.js";const I={key:0,class:"error","aria-live":"polite"},D={key:0,class:"error","aria-live":"polite"},E={key:0,class:"error","aria-live":"polite"},N={key:0,class:"error","aria-live":"polite"},M={key:0,class:"error","aria-live":"polite"},O={__name:"Settings",setup(W){const x=T(),y=P(),{proxy:g}=C();q(),$(()=>{S()});const n=d({start_time:"",end_time:"",booking_window:"",slot_duration:"",advanced_booking:""}),h=d(["08:00 ","09:00 ","10:00 ","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"]),w=d("");w.value=x.getUserId();const V=d(""),a=d({user_id:w,start_time:"",end_time:"",booking_window:"",slot_duration:"",advanced_booking:""}),S=async()=>{try{const l=await y.get(`v1/scheduler/settings/${w.value}`);a.value={start_time:l.data.dataPayload.data.start_time,end_time:l.data.dataPayload.data.end_time,booking_window:l.data.dataPayload.data.booking_window,slot_duration:l.data.dataPayload.data.slot_duration,advanced_booking:l.data.dataPayload.data.advanced_booking},V.value=l.data.dataPayload.data.id}catch{g.$showToast({title:"An error occurred ",text:"an error has occured while getting your settings!",icon:"success"})}};d(""),d(""),d(""),d(""),d("");const U=async()=>{try{const l=await y.put(`v1/scheduler/settings/${V.value}`,a.value);g.$showToast({title:"Updated",text:"settings updated successfully!",icon:"success"})}catch{g.$showToast({title:"Failed",text:"failed to update your settings",icon:"error"})}};return(l,t)=>{const _=i("b-form-input"),b=i("b-form-group"),c=i("b-col"),k=i("b-row"),f=i("b-card"),B=i("b-form");return r(),u("div",null,[e(f,{class:""},{default:o(()=>[t[9]||(t[9]=m("h2",{class:"text-center mb-2"},"Scheduler Settings",-1)),e(B,{onSubmit:A(U,["prevent"])},{default:o(()=>[e(f,null,{default:o(()=>[t[5]||(t[5]=m("h4",{class:"text-green"},"Working Hours",-1)),e(k,{class:""},{default:o(()=>[e(c,{md:"12"},{default:o(()=>[e(b,{label:"Start Time","label-for":"working-hours-start"},{default:o(()=>[e(_,{id:"working-hours-start",modelValue:a.value.start_time,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.start_time=s),type:"time",required:""},null,8,["modelValue"]),n.value.start_time?(r(),u("div",I,v(n.value.start_time),1)):p("",!0)]),_:1})]),_:1}),e(c,{md:"6"},{default:o(()=>[e(b,{label:"End Time","label-for":"working-hours-end"},{default:o(()=>[e(_,{id:"working-hours-end",modelValue:a.value.end_time,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.end_time=s),options:h.value,required:""},null,8,["modelValue","options"]),n.value.end_time?(r(),u("div",D,v(n.value.end_time),1)):p("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(f,null,{default:o(()=>[t[6]||(t[6]=m("h4",null,"Booking Settings",-1)),e(k,null,{default:o(()=>[e(c,{md:"12",class:"mb-4"},{default:o(()=>[e(b,{label:"Booking Window (in months)","label-for":"booking-window"},{default:o(()=>[e(_,{id:"booking-window",type:"number",modelValue:a.value.booking_window,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.booking_window=s),min:"1",max:"12",required:""},null,8,["modelValue"]),n.value.booking_window?(r(),u("div",E,v(n.value.booking_window),1)):p("",!0)]),_:1})]),_:1}),e(c,{md:"12"},{default:o(()=>[e(b,{label:"Slot Duration (in minutes)","label-for":"slot-duration"},{default:o(()=>[e(_,{id:"slot-duration",type:"number",modelValue:a.value.slot_duration,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.slot_duration=s),min:"15",max:"60",required:""},null,8,["modelValue"]),n.value.slot_duration?(r(),u("div",N,v(n.value.slot_duration),1)):p("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{class:"mb-3 p-3 shadow"},{default:o(()=>[t[7]||(t[7]=m("h4",null,"Buffer Time",-1)),e(k,null,{default:o(()=>[e(c,{md:"12"},{default:o(()=>[e(b,{label:"Buffer Time (in minutes)","label-for":"buffer-time"},{default:o(()=>[e(_,{id:"buffer-time",type:"number",modelValue:a.value.advanced_booking,"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.advanced_booking=s),min:"10",required:""},null,8,["modelValue"]),n.value.advanced_booking?(r(),u("div",M,v(n.value.advanced_booking),1)):p("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t[8]||(t[8]=m("div",{class:"text-center"},[m("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))]),_:1})]),_:1})])}}};export{O as default};

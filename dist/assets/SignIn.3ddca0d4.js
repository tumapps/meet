import{A as C,i as I,j as r,k as T,u as U,r as b,o as n,c as l,b as s,d as g,w,X as V,f as E,m as h,v as j,t as k,n as u,J as A,G as D,e as N,Y as B,p as F}from"./index.8cdfa475.js";import"./pdfjs.7adb8c57.js";const R=C(),Y=v=>R.post("/v1/auth/login",v);const $={class:"iq-auth-page"},q={class:"row m-0 align-items-center justify-content-center vh-100 w-100"},J={class:"col-md-4 col-lg-3"},z=["src"],G={class:"form-group"},L={key:0,class:"error","aria-live":"polite"},X={class:"form-group position-relative"},H=["type"],K={key:0,class:"error","aria-live":"polite"},O={class:"d-flex justify-content-between align-items-center mb-3"},Q={class:"text-center pb-3"},W=["disabled"],Z={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ae={__name:"SignIn",setup(v){const _=I(),o=r(!1),c=r(""),m=r(""),a=r({username:"",password:"",general:""}),p=T(),x=U(),{proxy:f}=F();function S(){_.navigateToFirstMenu(x)}const P=async()=>{a.value={username:"",password:"",general:""};const y={username:c.value,password:m.value};try{o.value=!0;const e=await Y(y);if(e.data.dataPayload&&!e.data.dataPayload.error&&e.data.dataPayload.data.menus){p.setToken(e.data.dataPayload.data.token,e.data.dataPayload.data.username);const t=e.data.dataPayload.data.token;p.setUserId(t),p.setRole(e.data.dataPayload.data.roles[0]),_.setMenus(e.data.dataPayload.data.menus),localStorage.setItem("loggedIn",!0),f.$showToast({title:"success",text:"You have successfully logged in!",icon:"success"}),S()}}catch(e){if(e.response&&e.response.status===422&&e.response.data.errorPayload){const t=e.response.data.errorPayload.errors;a.value.username=t.username||"",a.value.password=t.password||""}else f.$showToast({title:"error",text:"An unexpected error occurred!",icon:"error"})}finally{o.value=!1}},i=r(!1);return(y,e)=>{const t=b("router-link"),M=b("b-card");return n(),l("section",$,[s("div",q,[s("div",J,[g(M,{class:"h-100 py-5 d-flex flex-column justify-content-between",style:{background:"white !important"}},{default:w(()=>[s("img",{src:V||B,class:"d-block mx-auto logo-img",alt:"logo"},null,8,z),e[7]||(e[7]=s("h5",{class:"text-center mt-3 mb-4 fw-bold text-primary"},"Sign In | TUMMEET",-1)),s("form",{onSubmit:E(P,["prevent"])},[s("div",G,[e[3]||(e[3]=s("label",{class:"form-label",for:"username-id"},"Username",-1)),h(s("input",{type:"text",class:"form-control mb-0",id:"username","onUpdate:modelValue":e[0]||(e[0]=d=>c.value=d),placeholder:"Enter username","aria-label":"Username"},null,512),[[j,c.value]]),a.value.username?(n(),l("div",L,k(a.value.username),1)):u("",!0)]),s("div",X,[e[4]||(e[4]=s("label",{class:"form-label",for:"password"},"Password",-1)),h(s("input",{type:i.value?"text":"password",class:"form-control mb-0 pe-5",id:"password","onUpdate:modelValue":e[1]||(e[1]=d=>m.value=d),placeholder:"Enter password",autocomplete:"current-password","aria-label":"Password"},null,8,H),[[A,m.value]]),s("i",{class:D(["fas",i.value?"fa-eye":"fa-eye-slash"]),onClick:e[2]||(e[2]=d=>i.value=!i.value),style:{position:"absolute",top:"50%",right:"15px",transform:"translateY(50%)",cursor:"pointer",color:"#6c757d"}},null,2),a.value.password?(n(),l("div",K,k(a.value.password),1)):u("",!0)]),s("div",O,[e[6]||(e[6]=s("div",{class:"form-check d-inline-block pt-1 mb-0"},[s("input",{type:"checkbox",class:"form-check-input",id:"customCheck11"}),s("label",{class:"form-check-label",for:"customCheck11"},"Remember Me")],-1)),g(t,{to:{name:"request-password-reset"}},{default:w(()=>e[5]||(e[5]=[N("Forgot password")])),_:1})]),s("div",Q,[o.value?u("",!0):(n(),l("button",{key:0,type:"submit",class:"btn btn-primary",disabled:o.value,"aria-label":"Sign in"},"Sign in",8,W)),o.value?(n(),l("span",Z)):u("",!0)])],32)]),_:1})])])])}}};export{ae as default};

import{_ as W,V as O,r as _,o as g,c as h,b as e,G as B,d as t,H as N,t as y,u as T,j as p,w as n,F as I,C as z,A as J,O as H,y as C,z as E,q as U,e as q,l as R,P as Y}from"./index.c5eecd97.js";import{_ as G}from"./viewEvent.8dd948b1.js";import{_ as X}from"./spacesMiniTable.282c1c29.js";import"./pdfjs.7adb8c57.js";import"./component.b1c6ea99.js";const Z={components:{Vue3autocounter:O},props:{icon:{type:String,default:"user"},description:{type:String,default:""},value:{type:[Number,String],default:0},Iconcolor:{type:String,default:"#D89837"},Iconsize:{type:String,default:"32"}}},K={class:"card"},Q={class:"card-body"},ee={class:"d-flex align-items-center justify-content-center gap-3"},te={class:"counter text-center"},se={class:"text-dark"};function ae(S,v,r,f,i,d){const l=_("font-awesome-icon"),k=_("Vue3autocounter");return g(),h("div",K,[e("div",Q,[e("div",ee,[e("div",{class:B(`bg-${S.variant}-subtle p-2 rounded`)},[t(l,{icon:["fas",r.icon],style:N({color:r.Iconcolor}),class:"anicon"},null,8,["icon","style"])],2),e("div",null,[e("h4",te,[t(k,{ref:"counter",separator:"",duration:3,startAmount:0,endAmount:r.value},null,8,["endAmount"])]),e("span",se,y(r.description),1)])])])])}var A=W(Z,[["render",ae],["__scopeId","data-v-331d4d6f"]]);const oe={class:"card custom-card"},ne={key:0,class:"card-body",style:{"overflow-y":"auto"}},le=["onClick"],re={class:"ms-4"},ie={class:"mb-1"},ce={class:"mt-0 mb-0"},de={class:"text-primary"},ue={class:"mb-0",style:{color:"#4798d8"}},_e={key:1,class:"card-body"},pe={class:"text-center"},ve={__name:"upcomingEvents",props:{events:{type:Array,required:!0}},setup(S){const v=T(),r=S,f=p(null);r.events.length||(f.value="No Upcoming events");const i=()=>{v.push({name:"all-events"})},d=p(null),l=p(null),k=c=>{d.value&&(l.value=c,d.value.show())};return(c,u)=>{const V=_("b-col");return g(),h(I,null,[t(G,{ref_key:"editevent",ref:d,event_id:l.value},null,8,["event_id"]),t(V,{lg:"4",md:"6",sm:"12"},{default:n(()=>[e("div",oe,[e("div",{class:"flex-wrap card-header d-flex justify-content-between"},[e("div",{class:"header-title"},[u[1]||(u[1]=e("h4",null,"Upcoming Events",-1)),e("p",{class:"mb-0"},[u[0]||(u[0]=e("svg",{class:"me-2",width:"24",height:"24",viewBox:"0 0 24 2I4"},[e("path",{fill:"#17904b",d:"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z"})],-1)),e("span",{class:"text-primary",onClick:i,style:{cursor:"pointer"}},"View All")])])]),r.events.length!==0?(g(),h("div",ne,[(g(!0),h(I,null,z(r.events,(m,$)=>(g(),h("div",{class:"d-flex profile-media align-items-top",style:{cursor:"pointer"},key:$,onClick:D=>k(m.id)},[u[2]||(u[2]=e("div",{class:"mt-1 profile-dots-pills border-primary"},null,-1)),e("div",re,[e("h6",ie,y(m.title),1),e("p",ce,[e("span",de,y(m.start_date),1)]),e("span",ue,y(m.start_time)+" - "+y(m.end_time),1)])],8,le))),128))])):(g(),h("div",_e,[e("p",pe,y(f.value),1)]))])]),_:1})],64)}}};var me=W(ve,[["__scopeId","data-v-0ace502f"]]);const ge={class:"d-flex align-items-start justify-content-between mb-2"},he={class:"mb-3"},ye={class:"counter"},fe={class:"d-flex justify-content-between flex-wrap"},Se={__name:"AdminDashboardView",setup(S){const v=J(),r=H(),f=C(()=>r.theme_color),i=p(null),d=()=>{const a=Y();i.value=[a.primary,a.warning]};d(),E(f,()=>{d(),x.value={...x.value,options:{...x.value.options,colors:i.value}}},{deep:!0}),E(f,()=>{d(),b.value={...b.value,options:{...b.value.options,colors:i.value,markers:{...b.value.options.markers,strokeColors:i.value}}}},{deep:!0});const l=p({}),k=async()=>{const a=await v.get("/v1/scheduler/reports");l.value=a.data.dataPayload.data},c=p({}),u=async()=>{const a=await v.get("v1/scheduler/weekly-meeting-summary");c.value=a.data.dataPayload.data.weekly_meeting_summary},V=p({}),m=async()=>{const a=await v.get("/v1/scheduler/yearly-meeting-summary");V.value=a.data.dataPayload.data.yearly_meeting_summary},$=async()=>{const a=await v.get("/v1/scheduler/upcoming-events");Array.isArray(a.data.dataPayload.data)&&a.data.dataPayload.data.length>0&&(D.value=a.data.dataPayload.data)},D=p([]),x=C(()=>{const a=Object.keys(c.value||{}).sort();return{series:[{name:"Successful meetings",data:a.map(s=>{var o;return(o=c.value[s])==null?void 0:o.attended_meetings})},{name:"Failed meetings",data:a.map(s=>{var o,w;return(((o=c.value[s])==null?void 0:o.canceled_meetings)||0)+((w=c.value[s])==null?void 0:w.missed_meetings)})},{name:"Active meetings",data:a.map(s=>{var o;return(o=c.value[s])==null?void 0:o.active_meetings})}],options:{chart:{type:"bar",height:"100%",stacked:!0,toolbar:{show:!1}},colors:i.value,plotOptions:{bar:{horizontal:!1,columnWidth:"25%",endingShape:"rounded",borderRadius:3}},legend:{show:!1},dataLabels:{enabled:!1},stroke:{show:!0,width:3,colors:["transparent"]},grid:{show:!0,strokeDashArray:7},xaxis:{categories:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],labels:{minHeight:20,maxHeight:20,style:{colors:"#8A92A6"}}},yaxis:{title:{text:""},labels:{minWidth:15,maxWidth:15,style:{colors:"#8A92A6"}}},fill:{opacity:1},tooltip:{y:{formatter:function(s){return s}}},responsive:[{breakpoint:1025,options:{chart:{height:130}}}]}}}),P=C(()=>Object.values(c.value).reduce((a,s)=>a+(s.total_meetings||0),0)),j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=C(()=>({series:[{name:"Meetings",data:j.map(a=>{var s;return((s=V.value[a])==null?void 0:s.total_meetings)||0})}],options:{colors:i.value,chart:{height:"100%",type:"line",toolbar:{show:!1}},forecastDataPoints:{count:3},stroke:{width:3},grid:{show:!0,strokeDashArray:7},markers:{size:6,colors:"#FFFFFF",strokeColors:i.value,strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:0,shape:"circle",radius:2,offsetX:0,offsetY:0},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],axisBorder:{show:!1},axisTicks:{show:!1},tooltip:{enabled:!1}}}}));return U(async()=>{k(),u(),m(),$()}),(a,s)=>{const o=_("b-col"),w=_("b-row"),L=_("b-badge"),F=_("apexchart"),M=_("b-card");return g(),h(I,null,[t(w,{class:"row-cols-2 row-cols-md-3 row-cols-lg-5"},{default:n(()=>[t(o,null,{default:n(()=>[t(A,{value:l.value.total_appointments,description:"All",Iconcolor:"#3788D8",icon:"calendar-alt"},null,8,["value"])]),_:1}),t(o,null,{default:n(()=>[t(A,{value:l.value.active,description:"Active",Iconcolor:"#097B3E",icon:"calendar-check"},null,8,["value"])]),_:1}),t(o,null,{default:n(()=>[t(A,{value:l.value.pending,description:"Pending",Iconcolor:"#3788D8",icon:"hourglass"},null,8,["value"])]),_:1}),t(o,null,{default:n(()=>[t(A,{value:l.value.attended,description:"Completed",Iconcolor:"#097B3E",icon:"circle-check"},null,8,["value"])]),_:1}),t(o,null,{default:n(()=>[t(A,{value:l.value.canceled,description:"Cancelled",Iconcolor:"#d33",icon:"calendar-xmark"},null,8,["value"])]),_:1})]),_:1}),t(w,null,{default:n(()=>[t(o,{lg:"8",md:"6",sm:"12"},{default:n(()=>[t(X)]),_:1}),t(me,{events:D.value},null,8,["events"])]),_:1}),t(w,null,{default:n(()=>[t(o,{lg:"4",md:"12"},{default:n(()=>[t(M,{class:"card-block card-stretch card-height"},{default:n(()=>[e("div",ge,[s[1]||(s[1]=e("p",{class:"mb-0 text-dark"},"Total Meetings",-1)),t(L,{tag:"a",variant:" bg-primary-subtle",class:"badge rounded-pill",href:"javascript:void(0);"},{default:n(()=>s[0]||(s[0]=[q(" View ")])),_:1})]),s[2]||(s[2]=e("small",{class:"mb-2"},"This Week.",-1)),e("div",he,[e("h2",ye,[t(R(O),{ref:"counter",separator:",",duration:2,startAmount:0,endAmount:P.value},null,8,["endAmount"])])]),e("div",null,[t(F,{height:"100%",type:"bar",options:x.value.options,series:x.value.series},null,8,["options","series"])])]),_:1})]),_:1}),t(o,{lg:"8",md:"12"},{default:n(()=>[t(M,{class:"card-block card-stretch card-height"},{header:n(()=>[e("div",fe,[s[3]||(s[3]=e("h4",{class:"card-title"},"Meetings Distribution",-1)),e("div",null,y(new Date().getFullYear()),1)])]),default:n(()=>[t(F,{height:"100%",type:"line",class:"dashboard-line-chart",options:b.value.options,series:b.value.series},null,8,["options","series"])]),_:1})]),_:1})]),_:1})],64)}}};export{Se as default};

import{_ as P,h as d,i as S,u as C,A as T,r as t,o as p,c as m,d as r,w as n,b as s,t as _,j as A,k as I,v as L,l as V,e as N,m as B}from"./index.91d534ba.js";import{_ as D}from"./01.e8096b20.js";const E={class:"backimg"},$={class:"mt-4"},j={class:"form-group me-3"},H={key:0,class:"error","aria-live":"polite"},O={__name:"LockScreen",setup(U){const i=d(!1),l=d(""),a=d({password:"",general:""}),g=S(),v=C(),f=T(),{proxy:c}=B(),u=localStorage.getItem("user.username"),w=async()=>{a.value={username:"",password:"",general:""};try{i.value=!0;const o=await f.post("/v1/auth/login",{username:u,password:l.value});if(o.data.dataPayload&&!o.data.dataPayload.error){const e=o.headers["set-cookie"];document.cookie=e,c.$showToast({title:"success",text:"You have successfully logged in!",icon:"success"}),g.setToken(o.data.dataPayload.data.token,o.data.dataPayload.data.username),v.back()}else c.$showToast({title:"An error occurred ",text:"Ooops! an error has occured while logging in!",icon:"error"})}catch(o){if(c.$showToast({title:"An error occurred ",text:"Ooops! an error has occured while logging in!",icon:"error"}),o.response&&o.response.status===422&&o.response.data.errorPayload){const e=o.response.data.errorPayload.errors;a.value.password=e.password||""}}finally{i.value=!1}};return(o,e)=>{const b=t("b-button"),y=t("b-card"),h=t("b-col"),k=t("b-row");return p(),m("section",E,[r(k,{class:"align-items-center justify-content-center vh-100 w-100"},{default:n(()=>[r(h,{cols:"10",lg:"6"},{default:n(()=>[r(y,{class:"text-center p-5 rounded-3 bg-aliceblue",style:{"min-height":"400px"}},{default:n(()=>[e[3]||(e[3]=s("img",{src:D,alt:"User-Profile",class:"theme-color-default-img img-fluid avatar avatar-50 avatar-rounded",loading:"lazy"},null,-1)),s("h4",$,"Hi ! "+_(A(u)),1),e[4]||(e[4]=s("p",null,"Enter your password to access the admin.",-1)),s("div",j,[e[1]||(e[1]=s("label",{class:"form-label",for:"lock-pass"},"Password",-1)),I(s("input",{type:"password",class:"form-control mb-0",id:"password","onUpdate:modelValue":e[0]||(e[0]=x=>l.value=x),placeholder:"Enter password","aria-label":"Password",autocomplete:"off"},null,512),[[L,l.value]]),a.value.password?(p(),m("div",H,_(a.value.password),1)):V("",!0)]),r(b,{class:"bg-green",onClick:w,variant:"primary"},{default:n(()=>e[2]||(e[2]=[N("Login")])),_:1})]),_:1})]),_:1})]),_:1})])}}};var R=P(O,[["__scopeId","data-v-49eb689c"]]);export{R as default};

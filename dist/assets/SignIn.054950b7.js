import{A as C,P as I,h as l,i as M,u as T,r as b,o as r,c as n,b as s,d as f,w as y,Q as E,E as U,k as w,v as h,t as g,l as d,e as V,R as A,m as N}from"./index.91d534ba.js";const j=C(),B=m=>j.post("/v1/auth/login",m);const D={class:"iq-auth-page"},R={class:"row m-0 align-items-center justify-content-center vh-100 w-100"},q={class:"col-md-4 col-lg-3"},$=["src"],F={class:"form-group"},J={key:0,class:"error","aria-live":"polite"},L={class:"form-group"},Q={key:0,class:"error","aria-live":"polite"},Y={class:"d-flex justify-content-between align-items-center mb-3"},z={class:"text-center pb-3"},G=["disabled"],H={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},O={__name:"SignIn",setup(m){const k=I(),o=l(!1),i=l(""),u=l(""),a=l({username:"",password:"",general:""}),p=M(),x=T(),{proxy:_}=N(),S=async()=>{a.value={username:"",password:"",general:""};const v={username:i.value,password:u.value};try{o.value=!0;const e=await B(v);if(e.data.dataPayload&&!e.data.dataPayload.error&&e.data.dataPayload.data.menus){p.setToken(e.data.dataPayload.data.token,e.data.dataPayload.data.username);const t=e.data.dataPayload.data.token;p.setUserId(t),k.setMenus(e.data.dataPayload.data.menus),_.$showToast({title:"success",text:"You have successfully logged in!",icon:"success"}),x.push("/")}}catch(e){if(e.response&&e.response.status===422&&e.response.data.errorPayload){const t=e.response.data.errorPayload.errors;a.value.username=t.username||"",a.value.password=t.password||""}else _.$showToast({title:"error",text:"An unexpected error occurred!",icon:"error"})}finally{o.value=!1}};return(v,e)=>{const t=b("router-link"),P=b("b-card");return r(),n("section",D,[s("div",R,[s("div",q,[f(P,{class:"h-100 py-5 d-flex flex-column justify-content-between",style:{background:"white !important"}},{default:y(()=>[s("img",{src:E||A,class:"h-12 w-25 d-block mx-auto",alt:"logo"},null,8,$),e[6]||(e[6]=s("h5",{class:"text-center mt-3 mb-4 fw-bold text-primary"},"Sign In | TUMMEET",-1)),s("form",{onSubmit:U(S,["prevent"])},[s("div",F,[e[2]||(e[2]=s("label",{class:"form-label",for:"username-id"},"Username",-1)),w(s("input",{type:"text",class:"form-control mb-0",id:"username","onUpdate:modelValue":e[0]||(e[0]=c=>i.value=c),placeholder:"Enter username","aria-label":"Username"},null,512),[[h,i.value]]),a.value.username?(r(),n("div",J,g(a.value.username),1)):d("",!0)]),s("div",L,[e[3]||(e[3]=s("label",{class:"form-label",for:"password"},"Password",-1)),w(s("input",{type:"password",class:"form-control mb-0",id:"password","onUpdate:modelValue":e[1]||(e[1]=c=>u.value=c),placeholder:"Enter password",autocomplete:"current-password","aria-label":"Password"},null,512),[[h,u.value]]),a.value.password?(r(),n("div",Q,g(a.value.password),1)):d("",!0)]),s("div",Y,[e[5]||(e[5]=s("div",{class:"form-check d-inline-block pt-1 mb-0"},[s("input",{type:"checkbox",class:"form-check-input",id:"customCheck11"}),s("label",{class:"form-check-label",for:"customCheck11"},"Remember Me")],-1)),f(t,{to:{name:"request-password-reset"}},{default:y(()=>e[4]||(e[4]=[V("Forgot password")])),_:1})]),s("div",z,[o.value?d("",!0):(r(),n("button",{key:0,type:"submit",class:"btn btn-primary",disabled:o.value,"aria-label":"Sign in"},"Sign in",8,G)),o.value?(r(),n("span",H)):d("",!0)])],32)]),_:1})])])])}}};export{O as default};

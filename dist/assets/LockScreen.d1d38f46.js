import{_ as C,i as I,j as n,k as T,u as A,A as L,r as l,o as m,c as _,d as c,w as i,b as s,t as v,l as B,m as M,v as V,n as j,p as D}from"./index.848ef5b1.js";import{_ as E}from"./01.e8096b20.js";import"./pdfjs.7adb8c57.js";const N={class:"backimg"},$={class:"m-4 m"},F={class:"form-group me-3"},H={key:0,class:"error","aria-live":"polite"},O={__name:"LockScreen",setup(U){const w=I(),u=n(!1),a=n(""),t=n({password:"",general:""}),f=T(),d=A(),p=L(),{proxy:r}=D(),g=localStorage.getItem("user.username");function y(){w.navigateToFirstMenu(d)}const h=async()=>{try{await p.logout(),d.push("/auth/login")}catch(e){console.error("Error during logout:",e)}},b=async()=>{t.value={username:"",password:"",general:""};try{u.value=!0;const e=await p.post("/v1/auth/login",{username:g,password:a.value});if(e.data.dataPayload&&!e.data.dataPayload.error){const o=e.headers["set-cookie"];document.cookie=o,localStorage.setItem("loggedIn",!0),r.$showToast({title:"success",text:"You have successfully logged in!",icon:"success"}),f.setToken(e.data.dataPayload.data.token,e.data.dataPayload.data.username),y()}else r.$showToast({title:"An error occurred ",text:"Ooops! an error has occured while logging in!",icon:"error"})}catch(e){if(r.$showToast({title:"An error occurred ",text:"Ooops! an error has occured while logging in!",icon:"error"}),e.response&&e.response.status===422&&e.response.data.errorPayload){const o=e.response.data.errorPayload.errors;t.value.password=o.password||""}}finally{u.value=!1}};return(e,o)=>{const k=l("b-card"),x=l("b-col"),S=l("b-row");return m(),_("section",N,[c(S,{class:"align-items-center justify-content-center vh-100 w-100"},{default:i(()=>[c(x,{cols:"10",lg:"6"},{default:i(()=>[c(k,{class:"text-center p-5 rounded-3 bg-aliceblue",style:{"min-height":"400px"}},{default:i(()=>[o[1]||(o[1]=s("img",{src:E,alt:"User-Profile",class:"theme-color-default-img img-fluid avatar avatar-50 avatar-rounded",loading:"lazy"},null,-1)),s("h4",$,"Hi ! "+v(B(g)),1),o[2]||(o[2]=s("p",null,"Your session is locked. Please enter your password to continue.",-1)),s("div",F,[M(s("input",{type:"password",class:"form-control mb-0",id:"password","onUpdate:modelValue":o[0]||(o[0]=P=>a.value=P),placeholder:"Enter password","aria-label":"Password",autocomplete:"off"},null,512),[[V,a.value]]),t.value.password?(m(),_("div",H,v(t.value.password),1)):j("",!0)]),s("div",{class:"d-flex w-100 justify-content-center gap-5"},[s("button",{class:"btn btn-outline-primary",onClick:b},"Login"),s("button",{class:"btn btn-outline-warning",onClick:h},"go Back")])]),_:1})]),_:1})]),_:1})])}}};var q=C(O,[["__scopeId","data-v-2408b144"]]);export{q as default};

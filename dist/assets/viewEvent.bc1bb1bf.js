import{A as Y,j as m,z as q,r as g,o as d,g as A,w as i,d as r,b as a,m as B,v as U,c as v,t as p,n as f,l as k,e as $,p as G}from"./index.a8b7f511.js";import{C as w}from"./component.1096433d.js";const J={class:"mb-3"},K={key:0,class:"error","aria-live":"polite"},L={class:"mb-3"},O={key:0,class:"error","aria-live":"polite"},Q={class:"mb-3"},R={key:0,class:"error","aria-live":"polite"},W={class:"mb-3"},X={key:0,class:"error","aria-live":"polite"},Z={class:"mb-3"},ee={key:0,class:"error","aria-live":"polite"},te={class:"mb-3"},ae={key:0,class:"error","aria-live":"polite"},oe={class:"d-flex justify-content-center"},se={key:1,class:"btn btn-primary",type:"button",disabled:""},ne={__name:"viewEvent",props:{event_id:{type:Number,required:!0}},emits:["getEvents"],setup(I,{expose:N,emit:S}){const T=Y(),F=S,{proxy:V}=G(),D=I,_=m(D.event_id);q(()=>D.event_id,l=>{_.value=l},{immediate:!0});const s=m({}),P=m(!1),C=m({label:"ACTIVE"}),E={dateFormat:"Y-m-d",altInput:!0,altFormat:"F j, Y",minDate:"today",disable:[function(l){return l.getDay()===6||l.getDay()===0}]},h={enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0},t=m({title:"",start_date:"",end_date:"",start_time:"",end_time:"",description:""}),b=m(null),M=async l=>{var e;if(l&&(_.value=l),!_.value){console.error("Error: event_id is null or undefined");return}await z(),(e=b.value)==null||e.show()},j=()=>{t.value={title:"",start_date:"",end_date:"",start_time:"",end_time:"",description:""},s.value={}},x=m({}),z=async()=>{var l,e,n,c,y;try{const u=await T.get(`v1/scheduler/events/${_.value}`);t.value=u.data.dataPayload.data,C.value=t.value.recordStatus}catch(u){console.error("Error fetching event:",u),(l=b.value)==null||l.hide();const o=(y=(c=(n=(e=u==null?void 0:u.response)==null?void 0:e.data)==null?void 0:n.errorPayload)==null?void 0:c.errors)==null?void 0:y.message;V.$showToast({title:o,text:o,icon:"error"})}},H=async()=>{var l;try{P.value=!0;const e=await T.put(`v1/scheduler/events/${t.value.id}`,t.value);F("getEvents"),b.value.hide(),e.data.toastPayload&&(x.value=e.data.toastPayload,V.$showAlert({title:x.value.toastMessage,icon:x.value.toastTheme,showCancelButton:!1,showConfirmButton:!1,timer:4e3,timerProgressBar:!0}))}catch(e){if(e.response&&e.response.data.errorPayload)s.value=e.response.data.errorPayload.errors;else{const n=((l=e.response.data.errorPayload.errors)==null?void 0:l.message)||"An error occurred";V.$showToast({title:"An error occurred",text:n,icon:"error"})}}finally{P.value=!1}};return N({show:M}),(l,e)=>{const n=g("b-col"),c=g("b-row"),y=g("b-button"),u=g("b-modal");return d(),A(u,{ref_key:"editevent",ref:b,title:"Edit Event",class:"p-4 custom-modal-body","no-close-on-backdrop":"","no-close-on-esc":"",size:"xl","hide-footer":"",onHide:j},{default:i(()=>[r(c,null,{default:i(()=>[r(n,{md:"12"},{default:i(()=>[a("div",J,[e[7]||(e[7]=a("label",{for:"startDatePicker",class:"form-label"},"Title",-1)),B(a("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>t.value.title=o),class:"form-control",id:"name"},null,512),[[U,t.value.title]])]),s.value.title?(d(),v("div",K,p(s.value.title),1)):f("",!0)]),_:1})]),_:1}),r(c,null,{default:i(()=>[r(n,{md:"12",lg:"6"},{default:i(()=>[a("div",L,[e[8]||(e[8]=a("label",{for:"levelDropdown",class:"form-label"},"Start Date ",-1)),r(k(w),{modelValue:t.value.start_date,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.start_date=o),class:"form-control",config:E,id:"startDatePicker"},null,8,["modelValue"])]),s.value.date?(d(),v("div",O,p(s.value.start_date),1)):f("",!0)]),_:1}),r(n,{md:"12",lg:"6"},{default:i(()=>[a("div",Q,[e[9]||(e[9]=a("label",{for:"levelDropdown",class:"form-label"},"End Date ",-1)),r(k(w),{modelValue:t.value.end_date,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.end_date=o),class:"form-control",config:E,id:"startDatePicker"},null,8,["modelValue"])]),s.value.event_date?(d(),v("div",R,p(s.value.event_date),1)):f("",!0)]),_:1})]),_:1}),r(c,null,{default:i(()=>[r(n,{md:"6"},{default:i(()=>[a("div",W,[e[10]||(e[10]=a("label",{for:"startTimePicker",class:"form-label"},"Start Time",-1)),r(k(w),{modelValue:t.value.start_time,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.start_time=o),class:"form-control",config:h,id:"startTimePicker"},null,8,["modelValue"])]),s.value.start_time?(d(),v("div",X,p(s.value.start_time),1)):f("",!0)]),_:1}),r(n,{md:"5"},{default:i(()=>[a("div",Z,[e[11]||(e[11]=a("label",{for:"endTimePicker",class:"form-label"},"End Time",-1)),r(k(w),{modelValue:t.value.end_time,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.end_time=o),class:"form-control",config:h,id:"endTimePicker"},null,8,["modelValue"])]),s.value.end_time?(d(),v("div",ee,p(s.value.end_time),1)):f("",!0)]),_:1}),r(n,{md:"12"},{default:i(()=>[a("div",te,[e[12]||(e[12]=a("label",{for:"description",class:"form-label"},"Description",-1)),B(a("textarea",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.description=o),class:"form-control",id:"description",rows:"5"},null,512),[[U,t.value.description]])]),s.value.description?(d(),v("div",ae,p(s.value.description),1)):f("",!0)]),_:1})]),_:1}),a("div",oe,[P.value===!1?(d(),A(y,{key:0,onClick:e[6]||(e[6]=o=>H()),variant:"primary",disabled:C.value.label!=="ACTIVE"},{default:i(()=>e[13]||(e[13]=[$("Update")])),_:1},8,["disabled"])):(d(),v("button",se,e[14]||(e[14]=[a("span",{class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},null,-1),$(" submitting... ")])))])]),_:1},512)}}};export{ne as _};

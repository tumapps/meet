import{A as Y,j as v,r as b,o as d,g as C,w as n,d as a,b as t,m as E,v as B,c as u,t as c,n as f,l as y,e as N,p as z}from"./index.c5eecd97.js";import{C as g}from"./component.b1c6ea99.js";const q={class:"mb-3"},G={key:0,class:"error","aria-live":"polite"},J={class:"mb-3"},K={key:0,class:"error","aria-live":"polite"},L={class:"mb-3"},O={key:0,class:"error","aria-live":"polite"},Q={class:"mb-3"},R={key:0,class:"error","aria-live":"polite"},W={class:"mb-3"},X={key:0,class:"error","aria-live":"polite"},Z={class:"mb-3"},ee={key:0,class:"error","aria-live":"polite"},te={class:"d-flex justify-content-center mt-5"},oe={key:1,class:"btn btn-primary",type:"button",disabled:""},re={__name:"AddEvent",emits:["NewEvent"],setup(le,{expose:A,emit:F}){const{proxy:V}=z(),I=Y(),l=v({}),k=v(!1),M=F,D=v({title:"",description:"",start_date:"",end_date:"",start_time:"",end_time:""}),o=v({...D.value}),p=v(null),w=v(""),U=()=>{o.value={...D.value}},S=()=>{l.value={}};function x(){S(),U()}const $=()=>{p.value&&p.value.show()},h=()=>{p.value&&p.value.hide()},P={dateFormat:"Y-m-d",altInput:!0,altFormat:"F j, Y",minDate:"today",disable:[function(m){return m.getDay()===6||m.getDay()===0}]},T={enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0},j=async(m=!1)=>{var e;try{k.value=!0;const s=m?"put":"post",i=m?`v1/scheduler/events/${o.value.id}`:"v1/scheduler/events",_=await I[s](i,o.value);M("NewEvent"),h(),x(),_.data.toastPayload&&(w.value=_.data.toastPayload,V.$showAlert({title:w.value.toastMessage,icon:w.value.toastTheme,showCancelButton:!1,showConfirmButton:!1,timer:4e3,timerProgressBar:!0}))}catch(s){if(s.response&&s.response.data.errorPayload)l.value=s.response.data.errorPayload.errors;else{const i=(e=s.response.data.errorPayload.errors)==null?void 0:e.message;V.$showToast({title:i,text:i,icon:"error"})}}finally{k.value=!1}};return A({showModal:$}),(m,e)=>{const s=b("b-col"),i=b("b-row"),_=b("b-button"),H=b("b-modal");return d(),C(H,{ref_key:"newEvent",ref:p,title:"Add Event",class:"p-4 custom-modal-body","no-close-on-backdrop":"","no-close-on-esc":"",size:"xl","hide-footer":"",onHide:x},{default:n(()=>[a(i,null,{default:n(()=>[a(s,{md:"12"},{default:n(()=>[t("div",q,[e[7]||(e[7]=t("label",{for:"startDatePicker",class:"form-label"},"Title",-1)),E(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>o.value.title=r),class:"form-control",id:"name"},null,512),[[B,o.value.title]])]),l.value.title?(d(),u("div",G,c(l.value.title),1)):f("",!0)]),_:1})]),_:1}),a(i,null,{default:n(()=>[a(s,{md:"12",lg:"6"},{default:n(()=>[t("div",J,[e[8]||(e[8]=t("label",{for:"levelDropdown",class:"form-label"},"Start Date ",-1)),a(y(g),{modelValue:o.value.start_date,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.start_date=r),class:"form-control",config:P,id:"startDatePicker"},null,8,["modelValue"])]),l.value.date?(d(),u("div",K,c(l.value.start_date),1)):f("",!0)]),_:1}),a(s,{md:"12",lg:"6"},{default:n(()=>[t("div",L,[e[9]||(e[9]=t("label",{for:"levelDropdown",class:"form-label"},"End Date ",-1)),a(y(g),{modelValue:o.value.end_date,"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.end_date=r),class:"form-control",config:P,id:"startDatePicker"},null,8,["modelValue"])]),l.value.end_date?(d(),u("div",O,c(l.value.end_date),1)):f("",!0)]),_:1})]),_:1}),a(i,null,{default:n(()=>[a(s,{md:"6"},{default:n(()=>[t("div",Q,[e[10]||(e[10]=t("label",{for:"startTimePicker",class:"form-label"},"Start Time",-1)),a(y(g),{modelValue:o.value.start_time,"onUpdate:modelValue":e[3]||(e[3]=r=>o.value.start_time=r),class:"form-control",config:T,id:"startTimePicker"},null,8,["modelValue"])]),l.value.start_time?(d(),u("div",R,c(l.value.start_time),1)):f("",!0)]),_:1}),a(s,{md:"6"},{default:n(()=>[t("div",W,[e[11]||(e[11]=t("label",{for:"endTimePicker",class:"form-label"},"End Time",-1)),a(y(g),{modelValue:o.value.end_time,"onUpdate:modelValue":e[4]||(e[4]=r=>o.value.end_time=r),class:"form-control",config:T,id:"endTimePicker"},null,8,["modelValue"])]),l.value.end_time?(d(),u("div",X,c(l.value.end_time),1)):f("",!0)]),_:1})]),_:1}),a(i,null,{default:n(()=>[a(s,{md:"12"},{default:n(()=>[t("div",Z,[e[12]||(e[12]=t("label",{for:"description",class:"form-label"},"Description",-1)),E(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=r=>o.value.description=r),class:"form-control",id:"description",rows:"5"},null,512),[[B,o.value.description]])]),l.value.description?(d(),u("div",ee,c(l.value.description),1)):f("",!0)]),_:1})]),_:1}),t("div",te,[k.value===!1?(d(),C(_,{key:0,onClick:e[6]||(e[6]=r=>j()),variant:"primary"},{default:n(()=>e[13]||(e[13]=[N("Submit")])),_:1})):(d(),u("button",oe,e[14]||(e[14]=[t("span",{class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},null,-1),N(" submitting... ")])))])]),_:1},512)}}};export{re as _};

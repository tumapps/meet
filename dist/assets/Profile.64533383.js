import{_ as F,A as I,h as d,p as B,r as h,o as n,c as i,d as r,w as t,b as a,C,k as m,v as p,t as c,l as v,F as E,m as S}from"./index.ffa9f8cb.js";const L={class:"col-xl-12 col-lg-12"},R={class:"new-user-info pb-5"},j={key:0,class:"error","aria-live":"polite"},T={key:0,class:"error","aria-live":"polite"},q={key:0,class:"error","aria-live":"polite"},z={key:0,class:"error","aria-live":"polite"},G={key:0,class:"error","aria-live":"polite"},H={class:"col-xl-12 col-lg-12"},J={class:"row"},K={key:0,class:"error","aria-live":"polite"},Q={key:0,class:"error","aria-live":"polite"},W={key:0,class:"error","aria-live":"polite"},X={__name:"Profile",setup(Y){const k=I(),s=d({username:"",password:"",first_name:"",middle_name:"",last_name:"",mobile_number:"",email_address:"",confirm_password:"",oldPassword:""}),{proxy:f}=S(),U=d(""),_=d(""),w=d(""),b=d(""),y=d(""),P=d(""),g=d(""),x=d(""),N=d("");B(()=>{M()}),d(212409004);const M=async()=>{try{const l=await k.get("/v1/auth/profile-view/");U.value=l.data.dataPayload.data.username,b.value=l.data.dataPayload.data.first_name,y.value=l.data.dataPayload.data.middle_name,P.value=l.data.dataPayload.data.last_name,g.value=l.data.dataPayload.data.mobile_number,x.value=l.data.dataPayload.data.email_address}catch{f.$showAlert({title:"An error occurred ",text:"Ooops! an error has occured while fetching the profile!",icon:"error"})}},D=async()=>{s.value={username:"",password:"",first_name:"",middle_name:"",last_name:"",mobile_number:"",email_address:"",confirm_password:""};try{const l=await k.put("v1/auth/profile-update",{username:U.value,password:_.value,confirm_password:w.value,first_name:b.value,middle_name:y.value,last_name:P.value,mobile_number:g.value,email_address:x.value});l.data.dataPayload&&!l.data.dataPayload.error&&f.$showAlert({title:"Profile updated successfully",text:"Profile has been updated successfully!",icon:"success"})}catch(l){if(f.$showAlert({title:"Ooops!",text:"Ooops! an error has occured while updating the profile!",icon:"error"}),l.response&&l.response.status===422&&l.response.data.errorPayload){const e=l.response.data.errorPayload.errors;s.value.username=e.username||"",s.value.password=e.password||"",s.value.first_name=e.first_name||"",s.value.middle_name=e.middle_name||"",s.value.last_name=e.last_name||"",s.value.mobile_number=e.mobile_number||"",s.value.email_address=e.email_address||"",s.value.confirm_password=e.confirm_password||""}}},O=async()=>{s.value={password:"",confirm_password:"",oldPassword:""};try{const l=await k.post("v1/auth/update-password",{password:_.value,confirm_password:w.value,oldPassword:N.value});l.data.dataPayload&&!l.data.dataPayload.error&&f.$showAlert({title:"Password updated successfully",text:"Password has been updated successfully!",icon:"success"})}catch(l){if(l.response&&l.response.status===422&&l.response.data.errorPayload){const e=l.response.data.errorPayload.errors;s.value.password=e.password||"",s.value.confirm_password=e.confirm_password||"",s.value.oldPassword=e.oldPassword||""}else f.$showAlert({title:"Ooops!",text:"Ooops! an error has occured while updating the password!",icon:"error"})}};return(l,e)=>{const A=h("card-header"),u=h("b-col"),V=h("b-row"),$=h("b-card-body");return n(),i(E,null,[r(V,null,{default:t(()=>[a("div",L,[a("div",null,[r(A,{class:"card-header d-flex justify-content-between"},{default:t(()=>e[8]||(e[8]=[a("div",{class:"header-title"},[a("h4",{class:"card-title"},"Account Details")],-1)])),_:1}),r($,null,{default:t(()=>[a("div",R,[a("form",{onSubmit:C(D,["prevent"])},[r(V,null,{default:t(()=>[r(u,{md:"12",class:"form-group"},{default:t(()=>[e[9]||(e[9]=a("label",{class:"form-label",for:"fname"},"First Name:",-1)),m(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>b.value=o),type:"text",class:"form-control",id:"fname",placeholder:"First Name"},null,512),[[p,b.value]]),s.value.first_name?(n(),i("div",j,c(s.value.first_name),1)):v("",!0)]),_:1}),r(u,{md:"12",class:"form-group"},{default:t(()=>[e[10]||(e[10]=a("label",{class:"form-label",for:"cname"},"Middle Name:",-1)),m(a("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>y.value=o),type:"text",class:"form-control",id:"cname",placeholder:"Middle Name"},null,512),[[p,y.value]]),s.value.middle_name?(n(),i("div",T,c(s.value.middle_name),1)):v("",!0)]),_:1}),r(u,{md:"12",class:"form-group"},{default:t(()=>[e[11]||(e[11]=a("label",{class:"form-label",for:"lname"},"Last Name:",-1)),m(a("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>P.value=o),type:"text",class:"form-control",id:"lname",placeholder:"Last Name"},null,512),[[p,P.value]]),s.value.last_name?(n(),i("div",q,c(s.value.last_name),1)):v("",!0)]),_:1}),r(u,{md:"6",class:"form-group"},{default:t(()=>[e[12]||(e[12]=a("label",{class:"form-label",for:"mobno"},"Mobile Number:",-1)),m(a("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>g.value=o),type:"text",class:"form-control",id:"mobno",placeholder:"Mobile Number"},null,512),[[p,g.value]]),s.value.mobile_number?(n(),i("div",z,c(s.value.mobile_number),1)):v("",!0)]),_:1}),r(u,{md:"6",class:"form-group"},{default:t(()=>[e[13]||(e[13]=a("label",{class:"form-label",for:"email"},"Email:",-1)),m(a("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>x.value=o),type:"email",class:"form-control",id:"email",placeholder:"Email"},null,512),[[p,x.value]]),s.value.email_address?(n(),i("div",G,c(s.value.email_address),1)):v("",!0)]),_:1})]),_:1}),e[14]||(e[14]=a("button",{type:"submit",class:"btn btn-primary"},"Update",-1))],32)])]),_:1})])])]),_:1}),r(V,{class:"mt-5"},{default:t(()=>[a("div",H,[a("div",null,[r(A,{class:""},{default:t(()=>[e[20]||(e[20]=a("div",{class:"header-title"},[a("h4",{class:"mb-2"},"Change Password")],-1)),a("div",null,[a("form",{onSubmit:C(O,["prevent"]),class:"mt-3"},[a("div",J,[r(u,{md:"12",lg:"12",class:"form-group"},{default:t(()=>[e[15]||(e[15]=a("label",{class:"form-label",for:"pass"}," Current Password:",-1)),m(a("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>N.value=o),type:"password",class:"form-control",id:"oldpass",placeholder:"Password"},null,512),[[p,N.value]]),s.value.oldPassword?(n(),i("div",K,c(s.value.oldPassword),1)):v("",!0)]),_:1}),r(u,{md:"12",class:"form-group"},{default:t(()=>[e[16]||(e[16]=a("label",{class:"form-label",for:"pass"},"Password:",-1)),m(a("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>_.value=o),type:"password",class:"form-control",id:"pass",placeholder:"Password"},null,512),[[p,_.value]]),s.value.password?(n(),i("div",Q,c(s.value.password),1)):v("",!0)]),_:1}),r(u,{md:"12",class:"form-group"},{default:t(()=>[e[17]||(e[17]=a("label",{class:"form-label",for:"rpass"},"Repeat Password:",-1)),m(a("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>w.value=o),type:"password",class:"form-control",id:"rpass",placeholder:"Repeat Password "},null,512),[[p,w.value]]),e[18]||(e[18]=a("i",{class:"bi bi-eye-slash",id:"togglePassword"},null,-1)),s.value.confirm_password?(n(),i("div",W,c(s.value.confirm_password),1)):v("",!0)]),_:1})]),e[19]||(e[19]=a("button",{type:"submit",class:"btn btn-primary"},"Update",-1))],32)])]),_:1})])])]),_:1})],64)}}};var ee=F(X,[["__scopeId","data-v-3706e1d5"]]);export{ee as default};

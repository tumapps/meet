import{_ as re,h as r,A as de,p as ue,x as ce,r as m,o as d,c as u,b as t,d as l,w as s,e as f,k as ve,y as me,F as I,q as Y,j as _,t as c,l as p,m as pe}from"./index.620a136d.js";import{C as b}from"./component.5208d750.js";const fe={class:"d-flex justify-content-end"},_e={class:"d-flex justify-content-between"},be={class:"d-flex align-items-center"},ye=["value"],ge={class:"d-flex align-items-center"},ke={class:"table-responsive"},Pe={class:"table table-hover"},Ve=["onClick"],Ae=["onClick"],we={key:1},xe={class:"mb-3"},Te={key:0,class:"error","aria-live":"polite"},Ce={class:"mb-3"},De={key:0,class:"error","aria-live":"polite"},$e={class:"mb-3"},Se={key:0,class:"error","aria-live":"polite"},Ue={class:"mb-3"},Fe={key:0,class:"error","aria-live":"polite"},Be={key:0,class:"error","aria-live":"polite"},Ne={class:"d-flex justify-content-end"},je={class:"mb-3"},Ie={key:0,class:"error","aria-live":"polite"},Ee={class:"mb-3"},Me={key:0,class:"error","aria-live":"polite"},Le={class:"mb-3"},Ye={key:0,class:"error","aria-live":"polite"},ze={class:"mb-3"},Oe={key:0,class:"error","aria-live":"polite"},qe={key:0,class:"error","aria-live":"polite"},Ge={class:"d-flex justify-content-end"},He={__name:"Availability",setup(Ke){const S=r(null),U=r(null),z=r("212409003"),n=r({user_id:z.value,start_date:"",end_date:"",start_time:"",end_time:"",description:""}),x={enableTime:!1,dateFormat:"Y-m-d"},T={enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},O=()=>{S.value&&S.value.show()},q=o=>{U.value&&(Z(o),U.value.show())},{proxy:g}=pe(),k=de(),V=r([]),P=r(""),C=r("asc"),E=r(!1),D=r(1),F=r(1),G=r(20),B=r(20),H=r([10,20,50,100]),N=r(""),K=r(""),i=r({}),Q=o=>{o>0&&o<=F.value&&(D.value=o,getAppointments(o))},J=async()=>{D.value=1,await getAppointments(1)},A=o=>{P.value===o?C.value=C.value==="asc"?"desc":"asc":(P.value=o,C.value="asc")},R=async()=>{try{const o=await k.get(`v1/scheduler/availabilities?search=${N.value}`);E.value=Array.isArray(o.data),V.value=o.data.dataPayload.data}catch(o){console.error(o)}};ue(async()=>{$(1)});const W=o=>{K.value=o,g.$showAlert({title:"Are you sure?",text:"You are about to cancel this entry. Do you want to proceed?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, cancel it!",cancelButtonText:"No, keep it",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6"}).then(e=>{e.isConfirmed&&(X(o),$(1))})},X=async o=>{try{const e=await k.delete(`v1/scheduler/availability/${o}`);g.$showToast({title:"Appointment cancelled",icon:"success"}),$(1)}catch(e){console.error(e)}},$=async(o=1)=>{try{const e=await k.get(`v1/scheduler/availabilities?page=${o}&perPage=${B.value}`);E.value=Array.isArray(e.data),V.value=e.data.dataPayload.data,D.value=e.data.dataPayload.currentPage,F.value=e.data.dataPayload.totalPages,G.value=e.data.dataPayload.perPage}catch(e){console.error(e)}},Z=async o=>{try{const e=await k.get(`v1/scheduler/availability/${o}`);n.value=e.data.dataPayload.data}catch(e){console.error(e)}},h=ce(()=>[...V.value].sort((o,e)=>{let y=C.value==="asc"?1:-1;return o[P.value]<e[P.value]?-1*y:o[P.value]>e[P.value]?1*y:0})),ee=async()=>{try{const o=await k.post("v1/scheduler/availability",n.value);g.$showToast({title:"Updated",text:"settings updated successfully!",icon:"success"}),$(1)}catch{g.$showToast({title:"Failed",text:"failed to update your settings",icon:"error"})}},te=async()=>{try{const o=await k.put(`v1/scheduler/availability/${id}`,n.value);g.$showToast({title:"success",text:"updated successfully",icon:"success"})}catch{g.$showToast({title:"Failed",text:"failed to update your settings",icon:"error"})}};return(o,e)=>{const y=m("b-button"),v=m("b-col"),j=m("b-form-input"),le=m("b-input-group-append"),ae=m("b-input-group"),w=m("b-row"),oe=m("b-card"),se=m("pagination"),M=m("b-form-group"),L=m("b-modal");return d(),u(I,null,[e[41]||(e[41]=t("div",null,[t("h2",null,"Availability")],-1)),l(v,{lg:"12"},{default:s(()=>[l(oe,null,{default:s(()=>[l(w,{class:"mb-3"},{default:s(()=>[l(v,{lg:"12",class:"mb-3"},{default:s(()=>[t("div",fe,[l(y,{variant:"primary",onClick:O},{default:s(()=>e[17]||(e[17]=[f(" New Availability ")])),_:1})])]),_:1}),l(v,{lg:"12"},{default:s(()=>[t("div",_e,[t("div",be,[e[18]||(e[18]=t("label",{for:"itemsPerPage",class:"me-2"},"Items per page:",-1)),ve(t("select",{id:"itemsPerPage","onUpdate:modelValue":e[0]||(e[0]=a=>B.value=a),onChange:J,class:"form-select form-select-sm"},[(d(!0),u(I,null,Y(H.value,a=>(d(),u("option",{key:a,value:a},c(a),9,ye))),128))],544),[[me,B.value]])]),t("div",ge,[l(ae,null,{default:s(()=>[l(j,{placeholder:"Search...",modelValue:N.value,"onUpdate:modelValue":e[1]||(e[1]=a=>N.value=a)},null,8,["modelValue"]),l(le,null,{default:s(()=>[l(y,{variant:"primary",onClick:R},{default:s(()=>e[19]||(e[19]=[f("Search")])),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1}),t("div",ke,[t("table",Pe,[t("thead",null,[t("tr",null,[t("th",{onClick:e[2]||(e[2]=a=>A("description"))},e[20]||(e[20]=[f("Description "),t("i",{class:"fas fa-sort"},null,-1)])),t("th",{onClick:e[3]||(e[3]=a=>A("start_date"))},e[21]||(e[21]=[f("Start Date "),t("i",{class:"fas fa-sort"},null,-1)])),t("th",{onClick:e[4]||(e[4]=a=>A("end_date"))},e[22]||(e[22]=[f("End Date "),t("i",{class:"fas fa-sort"},null,-1)])),t("th",{onClick:e[5]||(e[5]=a=>A("start_time"))},e[23]||(e[23]=[f("Start Time "),t("i",{class:"fas fa-sort"},null,-1)])),t("th",{onClick:e[6]||(e[6]=a=>A("end_time"))},e[24]||(e[24]=[f("End Time "),t("i",{class:"fas fa-sort"},null,-1)])),e[25]||(e[25]=t("th",null,"Actions",-1))])]),t("tbody",null,[Array.isArray(V.value)&&V.value.length>0?(d(!0),u(I,{key:0},Y(h.value,(a,ne)=>(d(),u("tr",{key:ne},[t("td",null,c(a.description),1),t("td",null,c(a.start_date),1),t("td",null,c(a.end_date),1),t("td",null,c(a.start_time),1),t("td",null,c(a.end_time),1),t("td",null,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm me-3",onClick:ie=>q(a.id)},e[26]||(e[26]=[t("i",{class:"fas fa-edit"},null,-1)]),8,Ve),t("button",{type:"button",class:"btn btn-outline-warning btn-sm",onClick:ie=>W(a.id)},e[27]||(e[27]=[t("i",{class:"fas fa-cancel"},null,-1)]),8,Ae)])]))),128)):(d(),u("tr",we,e[28]||(e[28]=[t("td",{colspan:"6",class:"text-center"},"No records found.",-1)])))])])])]),_:1}),l(v,{sm:"12",lg:"12",class:"mt-2 d-flex justify-content-end"},{default:s(()=>[l(se,{"current-page":D.value,"total-pages":F.value,onGoToPage:Q},null,8,["current-page","total-pages"])]),_:1})]),_:1}),l(L,{ref_key:"newAvailability",ref:S,title:"New Availability",class:"modal-fullscreen my-modal","no-close-on-backdrop":"","no-close-on-esc":"",size:"xl","hide-footer":""},{default:s(()=>[e[34]||(e[34]=t("h4",null,"Availability Settings",-1)),l(w,null,{default:s(()=>[l(v,{md:"12"},{default:s(()=>[t("div",xe,[e[29]||(e[29]=t("label",{for:"startDatePicker",class:"form-label"},"Start Date",-1)),l(_(b),{modelValue:n.value.start_date,"onUpdate:modelValue":e[7]||(e[7]=a=>n.value.start_date=a),class:"form-control",config:x,id:"startDatePicker"},null,8,["modelValue"])]),i.value.start_date?(d(),u("div",Te,c(i.value.start_date),1)):p("",!0)]),_:1}),l(v,{md:"12"},{default:s(()=>[t("div",Ce,[e[30]||(e[30]=t("label",{for:"endDatePicker",class:"form-label"},"Last Date",-1)),l(_(b),{modelValue:n.value.end_date,"onUpdate:modelValue":e[8]||(e[8]=a=>n.value.end_date=a),class:"form-control",config:x,id:"endDatePicker"},null,8,["modelValue"])]),i.value.end_date?(d(),u("div",De,c(i.value.end_date),1)):p("",!0)]),_:1})]),_:1}),l(w,null,{default:s(()=>[l(v,{md:"6"},{default:s(()=>[t("div",$e,[e[31]||(e[31]=t("label",{for:"startTimePicker",class:"form-label"},"Start Time",-1)),l(_(b),{modelValue:n.value.start_time,"onUpdate:modelValue":e[9]||(e[9]=a=>n.value.start_time=a),class:"form-control",config:T,id:"startTimePicker"},null,8,["modelValue"])]),i.value.start_time?(d(),u("div",Se,c(i.value.start_time),1)):p("",!0)]),_:1}),l(v,{md:"5"},{default:s(()=>[t("div",Ue,[e[32]||(e[32]=t("label",{for:"endTimePicker",class:"form-label"},"End Time",-1)),l(_(b),{modelValue:n.value.end_time,"onUpdate:modelValue":e[10]||(e[10]=a=>n.value.end_time=a),class:"form-control",config:T,id:"endTimePicker"},null,8,["modelValue"])]),i.value.end_time?(d(),u("div",Fe,c(i.value.end_time),1)):p("",!0)]),_:1}),l(v,{md:"12",class:"mb-3"},{default:s(()=>[l(M,{label:"Description","label-for":"descriptionField"},{default:s(()=>[l(j,{id:"descriptionField",type:"text",modelValue:n.value.description,"onUpdate:modelValue":e[11]||(e[11]=a=>n.value.description=a)},null,8,["modelValue"]),i.value.description?(d(),u("div",Be,c(i.value.description),1)):p("",!0)]),_:1})]),_:1})]),_:1}),t("div",Ne,[l(y,{onClick:ee,variant:"primary"},{default:s(()=>e[33]||(e[33]=[f("Save")])),_:1})])]),_:1},512),l(L,{ref_key:"updateAvailability",ref:U,title:"update Availability",class:"modal-fullscreen my-modal","no-close-on-backdrop":"","no-close-on-esc":"",size:"xl","hide-footer":""},{default:s(()=>[e[40]||(e[40]=t("h4",null,"Availability Settings",-1)),l(w,null,{default:s(()=>[l(v,{md:"12"},{default:s(()=>[t("div",je,[e[35]||(e[35]=t("label",{for:"startDatePicker",class:"form-label"},"Start Date",-1)),l(_(b),{modelValue:n.value.start_date,"onUpdate:modelValue":e[12]||(e[12]=a=>n.value.start_date=a),class:"form-control",config:x,id:"startDatePicker"},null,8,["modelValue"])]),i.value.start_date?(d(),u("div",Ie,c(i.value.start_date),1)):p("",!0)]),_:1}),l(v,{md:"12"},{default:s(()=>[t("div",Ee,[e[36]||(e[36]=t("label",{for:"endDatePicker",class:"form-label"},"Last Date",-1)),l(_(b),{modelValue:n.value.end_date,"onUpdate:modelValue":e[13]||(e[13]=a=>n.value.end_date=a),class:"form-control",config:x,id:"endDatePicker"},null,8,["modelValue"])]),i.value.end_date?(d(),u("div",Me,c(i.value.end_date),1)):p("",!0)]),_:1})]),_:1}),l(w,null,{default:s(()=>[l(v,{md:"6"},{default:s(()=>[t("div",Le,[e[37]||(e[37]=t("label",{for:"startTimePicker",class:"form-label"},"Start Time",-1)),l(_(b),{modelValue:n.value.start_time,"onUpdate:modelValue":e[14]||(e[14]=a=>n.value.start_time=a),class:"form-control",config:T,id:"startTimePicker"},null,8,["modelValue"])]),i.value.start_time?(d(),u("div",Ye,c(i.value.start_time),1)):p("",!0)]),_:1}),l(v,{md:"5"},{default:s(()=>[t("div",ze,[e[38]||(e[38]=t("label",{for:"endTimePicker",class:"form-label"},"End Time",-1)),l(_(b),{modelValue:n.value.end_time,"onUpdate:modelValue":e[15]||(e[15]=a=>n.value.end_time=a),class:"form-control",config:T,id:"endTimePicker"},null,8,["modelValue"])]),i.value.end_time?(d(),u("div",Oe,c(i.value.end_time),1)):p("",!0)]),_:1}),l(v,{md:"12",class:"mb-3"},{default:s(()=>[l(M,{label:"Description","label-for":"descriptionField"},{default:s(()=>[l(j,{id:"descriptionField",type:"text",modelValue:n.value.description,"onUpdate:modelValue":e[16]||(e[16]=a=>n.value.description=a)},null,8,["modelValue"]),i.value.description?(d(),u("div",qe,c(i.value.description),1)):p("",!0)]),_:1})]),_:1})]),_:1}),t("div",Ge,[l(y,{onClick:te,variant:"primary"},{default:s(()=>e[39]||(e[39]=[f("Update")])),_:1})])]),_:1},512)],64)}}};var Re=re(He,[["__scopeId","data-v-7febac50"]]);export{Re as default};
